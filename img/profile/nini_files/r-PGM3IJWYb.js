if (self.CavalryLogger) { CavalryLogger.start_js(["MJ5rC"]); }

__d("VideoPlayerStreamSwitchReasons",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_HIGH_QUALITY:"prefer_high_quality",USER:"user"};},null);
__d("VideoQualityClassInternal",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={orderedValues:["sd","hd","uhd"]};},null);
__d('TaggedTimeRanges',['sprintf'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;},null);
__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(zl,am){var bm=zl.split("."),cm=k;bm[0] in cm||!cm.execScript||cm.execScript("var "+bm[0]);for(var dm;bm.length&&(dm=bm.shift());)bm.length||void 0===am?cm[dm]?cm=cm[dm]:cm=cm[dm]={}:cm[dm]=am;}function m(zl,am){function bm(){}bm.prototype=am.prototype;zl.Tb=am.prototype;zl.prototype=new bm();zl.prototype.constructor=zl;zl.Sb=function(cm,dm,em){return am.prototype[dm].apply(cm,Array.prototype.slice.call(arguments,2));};}function n(){}function o(zl){var am=console[zl];am?am.bind||(console[zl]=function(){am.apply(console,arguments);}):console[zl]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(zl){t[zl]={ga:s(),end:NaN};}function q(zl){if(zl=t[zl])zl.end=s();}function r(zl){return (zl=t[zl])&&zl.end?zl.end-zl.ga:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(zl,am,bm,cm){this.id=zl;this.bandwidth=am||0;this.lang=bm||"unknown";this.streamInfoID=cm;this.active=false;}l("shaka.player.AudioTrack.compare",function(zl,am){return zl.lang<am.lang?-1:zl.lang>am.lang?1:zl.bandwidth<am.bandwidth?-1:zl.bandwidth>am.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var zl=new v();zl.maxHeight=this.maxHeight;zl.minHeight=this.minHeight;zl.maxWidth=this.maxWidth;zl.maxBandwidth=this.maxBandwidth;zl.minBandwidth=this.minBandwidth;return zl;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(zl){var am=[];am.push("font-size: "+zl.fontSize);am.push("color: "+y(zl.fontColor,zl.fontOpacity));am.push("background-color: "+y(zl.backgroundColor,zl.backgroundOpacity));for(var bm=[],cm=0;cm<zl.fontEdge.length;++cm){var dm=zl.fontEdge[cm].slice(3,6);bm.push(y(zl.fontEdge[cm].slice(0,3),zl.fontOpacity)+" "+dm.join("px ")+"px");}am.push("text-shadow: "+bm.join(","));return am.join("; ");}function y(zl,am){return "rgba("+zl.concat(am).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(zl,am){this.id=zl;this.lang=am||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(zl,am){return zl.lang<am.lang?-1:zl.lang>am.lang?1:0;});function ea(zl,am,bm,cm,dm,em,fm){this.id=zl;this.bandwidth=am||0;this.width=bm||0;this.height=cm||0;this.streamInfoID=dm;this.fbQualityLabel=em;this.fbQualityClass=fm;this.active=false;}function fa(zl,am){var bm=zl.width*zl.height,cm=am.width*am.height;return bm<cm?-1:bm>cm?1:zl.bandwidth<am.bandwidth?-1:zl.bandwidth>am.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var zl="CustomEvent" in i;if(zl)try{new CustomEvent("");}catch(am){zl=false;}zl||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(zl,am){var bm=document.createEvent("CustomEvent"),cm=am||{bubbles:false,cancelable:false,detail:null};bm.initCustomEvent(zl,!!cm.bubbles,!!cm.cancelable,cm.detail);return bm;}function ia(){var zl=Element.prototype;zl.requestFullscreen=zl.requestFullscreen||zl.mozRequestFullScreen||zl.msRequestFullscreen||zl.webkitRequestFullscreen;zl=Document.prototype;zl.exitFullscreen=zl.exitFullscreen||zl.mozCancelFullScreen||zl.msExitFullscreen||zl.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(zl){var am=zl.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),am=new Event(am,zl);zl.target.dispatchEvent(am);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(zl){return null==zl?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(zl){this.c=[];this.b=[];this.X=pa;if(zl)try{zl(this.U.bind(this),this.a.bind(this));}catch(am){this.a(am);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(zl){return i.setImmediate(zl);},ya=function(zl){return i.clearImmediate(zl);}):(xa=function(zl){return i.setTimeout(zl,0);},ya=function(zl){return i.clearTimeout(zl);}));}l("shaka.polyfill.Promise.install",qa);function ra(zl){var am=new oa();am.U(zl);return am;}function sa(zl){var am=new oa();am.a(zl);return am;}function ta(zl){function am(gm,hm,im){gm.X==pa&&(dm[hm]=im,cm++,cm==dm.length&&gm.U(dm));}var bm=new oa();if(!zl.length)return bm.U([]),bm;for(var cm=0,dm=Array(zl.length),em=bm.a.bind(bm),fm=0;fm<zl.length;++fm)zl[fm]&&zl[fm].then?zl[fm].then(am.bind(null,bm,fm),em):am(bm,fm,zl[fm]);return bm;}function ua(zl){for(var am=new oa(),bm=am.U.bind(am),cm=am.a.bind(am),dm=0;dm<zl.length;++dm)zl[dm]&&zl[dm].then?zl[dm].then(bm,cm):bm(zl[dm]);return am;}oa.prototype.then=function(zl,am){var bm=new oa();switch(this.X){case 1:va(this,bm,zl);break;case 2:va(this,bm,am);break;case pa:this.c.push({Fa:bm,xa:zl}),this.b.push({Fa:bm,xa:am});}return bm;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(zl){return this.then(void 0,zl);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.U=function(zl){if(this.X==pa){this.ta=zl;this.X=1;for(zl=0;zl<this.c.length;++zl)va(this,this.c[zl].Fa,this.c[zl].xa);this.c=[];this.b=[];}};oa.prototype.a=function(zl){if(this.X==pa){this.ta=zl;this.X=2;for(zl=0;zl<this.b.length;++zl)va(this,this.b[zl].Fa,this.b[zl].xa);this.c=[];this.b=[];}};function va(zl,am,bm){ab.push(function(){if(bm&&"function"==typeof bm){try{var dm=bm(this.ta);}catch(cm){am.a(cm);return;}dm instanceof oa?dm==am?am.a(new TypeError("Chaining cycle detected")):dm.then(am.U.bind(am),am.a.bind(am)):am.U(dm);}else 1==this.X?am.U(this.ta):am.a(this.ta);}.bind(zl));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var zl=ab;ab=[];for(var am=0;am<zl.length;++am)zl[am]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var zl=HTMLVideoElement.prototype;!zl.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in zl&&(zl.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(zl,am){for(var bm=[],cm=0;cm<zl.length;++cm){for(var dm=false,em=0;em<bm.length&&!(dm=am?am(zl[cm],bm[em]):zl[cm]===bm[em]);++em);dm||bm.push(zl[cm]);}return bm;}function eb(){return Date.now()+fb;}var fb=0;function gb(zl){this.b=zl;this.c=0==hb;this.a=0;}var hb=1;function ib(zl){return zl.a<zl.b.byteLength;}function jb(zl){var am=zl.b.getUint8(zl.a);zl.a+=1;return am;}function kb(zl){var am=zl.b.getUint32(zl.a,zl.c);zl.a+=4;return am;}function lb(zl){var am,bm;zl.c?(am=zl.b.getUint32(zl.a,true),bm=zl.b.getUint32(zl.a+4,true)):(bm=zl.b.getUint32(zl.a,false),am=zl.b.getUint32(zl.a+4,false));if(2097151<bm)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");zl.a+=8;return bm*Math.pow(2,32)+am;}function mb(zl){if(zl.a+16>zl.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var am=new Uint8Array(zl.b.buffer,zl.a,16);zl.a+=16;return am;}function nb(zl,am){if(zl.a+am>zl.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");zl.a+=am;}function ob(zl){this.b=zl;this.a=new gb(zl);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(zl){var am;am=rb(zl);if(7<am.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var bm=0,cm=0;cm<am.length;cm++)bm=256*bm+am[cm];am=bm;bm=rb(zl);zl:{for(cm=0;cm<pb.length;cm++)if(td(bm,pb[cm])){cm=true;break zl;}cm=false;};if(cm){bm=zl.b.byteLength-zl.a.a;}else{if(8==bm.length&&bm[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var cm=bm[0]&(1<<8-bm.length)-1,dm=1;dm<bm.length;dm++)cm=256*cm+bm[dm];bm=cm;}bm=zl.a.a+bm<=zl.b.byteLength?bm:zl.b.byteLength-zl.a.a;cm=new DataView(zl.b.buffer,zl.b.byteOffset+zl.a.a,bm);nb(zl.a,bm);return new sb(am,cm);}function rb(zl){var am=jb(zl.a),bm;for(bm=1;8>=bm&&!(am&1<<8-bm);bm++);if(8<bm)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var cm=new Uint8Array(bm);cm[0]=am;for(am=1;am<bm;am++)cm[am]=jb(zl.a);return cm;}function sb(zl,am){this.id=zl;this.a=am;}function tb(zl){if(8<zl.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==zl.a.byteLength&&zl.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var am=0,bm=0;bm<zl.a.byteLength;bm++)var cm=zl.a.getUint8(bm),am=256*am+cm;return am;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(zl){this.c=Math.exp(Math.log(.5)/zl);this.a=this.b=0;}vb.prototype.sample=function(zl,am){var bm=Math.pow(this.c,zl);this.b=am*(1-bm)+bm*this.b;this.a+=zl;};function wb(zl){return zl.b/(1-Math.pow(zl.c,zl.a));}function xb(zl){var am=new CustomEvent(zl.type,{detail:zl.detail,bubbles:!!zl.bubbles}),bm;for(bm in zl)bm in am||(am[bm]=zl[bm]);return am;}function yb(zl){return new CustomEvent("error",{detail:zl,bubbles:true});}function zb(zl,am,bm){cc(am);cc(bm);return bm==am||zl>=ac&&bm==am.split("-")[0]||zl>=bc&&bm.split("-")[0]==am.split("-")[0]?true:false;}var ac=1,bc=2;function cc(zl){zl=zl.toLowerCase().split("-");var am=dc[zl[0]];am&&(zl[0]=am);return zl.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(zl){return Object.keys(zl).map(function(am){return zl[am];});}function fc(zl,am){return ic(zl,am,"boolean");}function gc(zl,am,bm){zl=ic(zl,am,"number");if(null==zl)return null;if(isNaN(zl)||zl==Number.NEGATIVE_INFINITY||zl==Number.POSITIVE_INFINITY)throw new RangeError("'"+am+"' must be finite.");if(null!=bm&&zl<bm)throw new RangeError("'"+am+"' must be >= "+bm);return zl;}function hc(zl,am){return ic(zl,am,"string");}function ic(zl,am,bm){zl=zl[am];if(null==zl)return null;if(typeof zl!=bm)throw new TypeError("'"+am+"' must be a "+bm+".");return zl;}function jc(zl,am,bm){zl=zl[am];if(null==zl)return null;if(!(zl instanceof bm))throw new TypeError("'"+am+"' must be an instance of "+bm.name+".");return zl;}function kc(){this.a={};}kc.prototype.push=function(zl,am){this.a.hasOwnProperty(zl)?this.a[zl].push(am):this.a[zl]=[am];};kc.prototype.set=function(zl,am){this.a[zl]=am;};kc.prototype.get=function(zl){return (zl=this.a[zl])?zl.slice():null;};function lc(zl){var am=[],bm;for(bm in zl.a)am.push.apply(am,zl.a[bm]);return am;}function mc(zl,am,bm){if(zl=zl.a[am])for(am=0;am<zl.length;++am)zl[am]==bm&&(zl.splice(am,1),--am);}function nc(zl){var am=[],bm;for(bm in zl.a)am.push(bm);return am;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(zl,am,bm,cm){am=new rc(am,bm,cm);zl.a.push(bm,am);}oc.prototype.qa=function(zl,am){for(var bm=this.a.get(am)||[],cm=0;cm<bm.length;++cm){var dm=bm[cm];dm.target==zl&&(dm.qa(),mc(this.a,am,dm));}};function qc(zl){for(var am=lc(zl.a),bm=0;bm<am.length;++bm)am[bm].qa();zl.a.a={};}function rc(zl,am,bm){this.target=zl;this.type=am;this.a=bm;this.target.addEventListener(am,bm,false);}rc.prototype.qa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(zl){this.ua=new kc();this.R=zl;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(zl,am,bm){bm||this.ua.push(zl,am);};sc.prototype.removeEventListener=function(zl,am,bm){bm||mc(this.ua,zl,am);};sc.prototype.dispatchEvent=function(zl){zl.hasOwnProperty("srcElement")||(delete zl.srcElement,Object.defineProperty(zl,"srcElement",{get:function(){return null;}}));if(zl.hasOwnProperty("target")){zl.target=this;}else{delete zl.target;var am=this;Object.defineProperty(zl,"target",{get:function(){return am;},set:function(cm){am=cm;}});}if(zl.hasOwnProperty("currentTarget")){zl.currentTarget=null;}else{delete zl.currentTarget;var bm=null;Object.defineProperty(zl,"currentTarget",{get:function(){return bm;},set:function(cm){bm=cm;}});}return tc(this,zl);};function tc(zl,am){am.currentTarget=zl;for(var bm=zl.ua.get(am.type)||[],cm=0;cm<bm.length;++cm){var dm=bm[cm];try{dm.handleEvent?dm.handleEvent(am):dm.call(zl,am);}catch(em){}}zl.R&&am.bubbles&&tc(zl.R,am);return am.defaultPrevented;}function uc(zl){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=zl||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(zl,am){if(!(65536>am)){zl=Math.max(zl,50);var bm=8000*am/zl,cm=zl/1000;this.a.sample(cm,bm);this.g.sample(cm,bm);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(zl,am,bm){uc.call(this,bm);this.c=zl||0;this.b=void 0===am?Infinity:am;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(zl,am){zl<=this.c&&8000*am/zl>this.b||uc.prototype.sample.call(this,zl,am);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var zl,am,bm=new Promise(function(cm,dm){zl=cm;am=dm;});bm.resolve=zl;bm.reject=am;bm.destroy=xc.prototype.destroy;return bm;}xc.prototype.destroy=function(){this.catch(function(){});var zl=Error("Destroyed!");zl.type="destroy";this.reject(zl);};function yc(zl){zl.split("").reduce(function(am,bm,cm){return am+(cm&&0==cm%4?" "+bm:bm);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(zl,am){if(zl.f)throw Error("Cannot append to a running task!");zl.b.push(am);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(zl,am){var bm=zl.b[0](am),cm;bm?(cm=bm[0],zl.c=bm[1]):(cm=Promise.resolve(),zl.c=null);cm.then(dd(zl,function(dm){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,dm):(this.g.resolve(dm),this.c=null));})).catch(dd(zl,function(dm){this.b=[];this.c=null;this.a?cd(this):this.g.reject(dm);}));}function cd(zl){var am=Error("Task aborted.");am.type="aborted";zl.g.reject(am);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(zl),5);}function dd(zl,am){return am.bind(zl);}function ed(zl,am,bm){MediaSource.isTypeSupported(am);am=zl.addSourceBuffer(am);this.h=zl;this.c=am;this.l=bm;this.i=new oc();this.v=null;this.b=[];this.s=0;this.f=this.a=null;this.m=0;pc(this.i,this.c,"updateend",this.A.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(zl,am){for(var bm=zl.c.buffered,cm=0;cm<bm.length;++cm){var dm=bm.start(cm)-fd,em=bm.end(cm)+fd;if(am>=dm&&am<=em)return bm.end(cm)-am;}return 0;}function hd(zl,am){var bm=am.a?am.a-am.b:1,cm=new ah();cm.a=3;cm.j=1000*bm;cm.c=1000*zl.m;cm.m=zl.v;return cm;}function id(zl,am,bm,cm){if(zl.a)return zl=Error("Cannot fetch ("+zl.j+"): previous operation not complete."),zl.type="stream",Promise.reject(zl);zl.a=new zc();bm!=zl.c.timestampOffset&&(zl.c.timestampOffset=bm);bm=hd(zl,am);var dm=kh(am.url,bm,zl.l),em=hh.prototype.f.bind(am.url),fm=0;cm&&ad(zl.a,function(){return [cm.then(function(im){im.ia>fm&&(fm=im.ia);return nd(this,im);}.bind(this)),this.g.bind(this)];}.bind(zl));ad(zl.a,dd(zl,function(){return [dm.then(function(im){im.ia>fm&&(fm=im.ia);this.l.getBandwidth();return nd(this,im);}.bind(this)),function(){em();this.g();}.bind(this)];}));var gm=0==zl.c.buffered.length&&0==zl.b.length,hm=null;ad(zl.a,function(){if(0==this.c.buffered.length){var im=Error("Failed to buffer segment ("+this.j+").");im.type="stream";return [Promise.reject(im)];}gm&&(im=am.b,hm=this.c.buffered.start(0)-im);im=vh(this.b,am.b);0<=im?this.b.splice(im+1,0,am):this.b.push(am);}.bind(zl));return md(zl).then(function(){return Promise.resolve({T:hm,ob:fm});}.bind(zl));}function jd(zl){if(zl.a)return zl=Error("Cannot clear ("+zl.j+"): previous operation not complete."),zl.type="stream",Promise.reject(zl);zl.a=new zc();ad(zl.a,function(){var am;am:if(0==this.c.buffered.length){am=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(bm){am=Promise.reject(bm);break am;}this.b=[];am=this.f=new xc();};return [am,this.g.bind(this)];}.bind(zl));return md(zl);}function kd(zl,am){if(zl.a){var bm=Error("Cannot clearAfter ("+zl.j+"): previous operation not complete.");bm.type="stream";return Promise.reject(bm);}zl.a=new zc();ad(zl.a,function(){return [od(this,am),this.g.bind(this)];}.bind(zl));return md(zl);}function ld(zl){zl.a?(zl=zl.a,zl.a?zl=zl.a:zl.f?(zl.c&&zl.c(),zl.a=new xc(),zl=zl.a):(zl.f=true,zl=Promise.resolve())):zl=Promise.resolve();return zl;}function md(zl){zl.a.start();return zl.a.g.then(dd(zl,function(){this.a=null;})).catch(dd(zl,function(am){this.a=null;return Promise.reject(am);}));}function nd(zl,am){try{zl.c.appendBuffer(am);}catch(bm){return Promise.reject(bm);}zl.f=new xc();return zl.f;}function od(zl,am){if(0==zl.c.buffered.length)return Promise.resolve();var bm=vh(zl.b,am);if(-1==bm||bm==zl.b.length-1)return Promise.resolve();try{zl.c.remove(zl.b[bm+1].b,zl.h.duration);}catch(cm){return Promise.reject(cm);}zl.b=zl.b.slice(0,bm+1);zl.f=new xc();return zl.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.A=function(){this.f&&(this.f.resolve(),this.f=null);};function pd(zl){return String.fromCharCode.apply(null,zl);}l("shaka.util.Uint8ArrayUtils.toString",pd);function qd(zl){for(var am=new Uint8Array(zl.length),bm=0;bm<zl.length;++bm)am[bm]=zl.charCodeAt(bm);return am;}l("shaka.util.Uint8ArrayUtils.fromString",qd);l("shaka.util.Uint8ArrayUtils.toBase64",function(zl,am){var bm=void 0==am?true:am,cm=i.btoa(pd(zl)).replace(/\+/g,"-").replace(/\//g,"_");return bm?cm:cm.replace(/=*$/,"");});function rd(zl){return qd(i.atob(zl.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",rd);l("shaka.util.Uint8ArrayUtils.fromHex",function(zl){for(var am=new Uint8Array(zl.length/2),bm=0;bm<zl.length;bm+=2)am[bm/2]=i.parseInt(zl.substr(bm,2),16);return am;});function sd(zl){for(var am="",bm=0;bm<zl.length;++bm){var cm=zl[bm].toString(16);1==cm.length&&(cm="0"+cm);am+=cm;}return am;}l("shaka.util.Uint8ArrayUtils.toHex",sd);function td(zl,am){if(!zl&&!am)return true;if(!zl||!am||zl.length!=am.length)return false;for(var bm=0;bm<zl.length;++bm)if(zl[bm]!=am[bm])return false;return true;}function ud(){this.h=this.a="";this.l=false;this.s=this.m=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function vd(zl,am){var bm=new ud();bm.a=zl.a;bm.h=zl.h;bm.l=zl.l;bm.m=zl.m;bm.s=zl.s;bm.g=zl.g;bm.i=zl.i;bm.f=zl.f;bm.j=zl.j;bm.c=zl.c?new Uint8Array(zl.c.buffer):null;wd(bm,zl.b);wd(bm,am.b);return bm;}function wd(zl,am){var bm=zl.b.concat(am.map(function(cm){return {initData:new Uint8Array(cm.initData.buffer),initDataType:cm.initDataType};}));zl.b=db(bm,xd);}function xd(zl,am){return zl.initDataType==am.initDataType&&td(zl.initData,am.initData);}function yd(zl,am,bm,cm){this.a=[];cm&&this.a.push(cm);}l("shaka.player.DrmSchemeInfo",yd);yd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};yd.PersistentState={OPTIONAL:0,REQUIRED:1};yd.createUnencrypted=function(){return new yd(0,0,0,null);};function zd(zl,am){try{var cm=new be(zl,am);return Promise.resolve(cm);}catch(bm){return Promise.reject(bm);}}function ae(zl){var am=this.mediaKeys;am&&am!=zl&&de(am,null);delete this.mediaKeys;(this.mediaKeys=zl)&&de(zl,this);return Promise.resolve();}function be(zl,am){this.a=this.keySystem=zl;var bm=true;"org.w3.clearkey"==zl&&(this.a="webkit-org.w3.clearkey",bm=false);var cm=false,dm;dm=document.getElementsByTagName("video");dm=dm.length?dm[0]:document.createElement("video");for(var em=0;em<am.length;++em){var fm=am[em],gm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:fm.initDataTypes,sessionTypes:["temporary"]},hm=false;if(fm.audioCapabilities)for(var im=0;im<fm.audioCapabilities.length;++im){var jm=fm.audioCapabilities[im];jm.contentType&&(hm=true,dm.canPlayType(jm.contentType.split(";")[0],this.a)&&(gm.audioCapabilities.push(jm),cm=true));}if(fm.videoCapabilities)for(im=0;im<fm.videoCapabilities.length;++im)jm=fm.videoCapabilities[im],jm.contentType&&(hm=true,dm.canPlayType(jm.contentType,this.a)&&(gm.videoCapabilities.push(jm),cm=true));hm||(cm=dm.canPlayType("video/mp4",this.a)||dm.canPlayType("video/webm",this.a));"required"==fm.persistentState&&(bm?(gm.persistentState="required",gm.sessionTypes=["persistent-license"]):cm=false);if(cm){this.b=gm;return;}}bm="Unsupported keySystem";if("org.w3.clearkey"==zl||"com.widevine.alpha"==zl)bm="None of the requested configurations were supported.";bm=Error(bm);bm.name="NotSupportedError";bm.code=DOMException.NOT_SUPPORTED_ERR;throw bm;}be.prototype.createMediaKeys=function(){var zl=new ce(this.a);return Promise.resolve(zl);};be.prototype.getConfiguration=function(){return this.b;};function ce(zl){this.g=zl;this.b=null;this.a=new oc();this.c=[];this.f={};}function de(zl,am){zl.b=am;qc(zl.a);am&&(pc(zl.a,am,"webkitneedkey",zl.Jb.bind(zl)),pc(zl.a,am,"webkitkeymessage",zl.Ib.bind(zl)),pc(zl.a,am,"webkitkeyadded",zl.Gb.bind(zl)),pc(zl.a,am,"webkitkeyerror",zl.Hb.bind(zl)));}j=ce.prototype;j.createSession=function(zl){var am=zl||"temporary";if("temporary"!=am&&"persistent-license"!=am)throw new TypeError("Session type "+zl+" is unsupported on this platform.");zl=this.b||document.createElement("video");zl.src||(zl.src="about:blank");am=new fe(zl,this.g,am);this.c.push(am);return am;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Jb=function(zl){zl=xb({type:"encrypted",initDataType:"webm",initData:zl.initData});this.b.dispatchEvent(zl);};j.Ib=function(zl){var am=ee(this,zl.sessionId);am&&(zl=xb({type:"message",messageType:void 0==am.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:zl.message}),am.b&&(am.b.resolve(),am.b=null),am.dispatchEvent(zl));};j.Gb=function(zl){if(zl=ee(this,zl.sessionId))he(zl,"usable"),zl.a&&zl.a.resolve(),zl.a=null;};j.Hb=function(zl){var am=ee(this,zl.sessionId);if(am){var bm=Error("EME v0.1b key error");bm.errorCode=zl.errorCode;bm.errorCode.systemCode=zl.systemCode;!zl.sessionId&&am.b?(bm.method="generateRequest",45==zl.systemCode&&(bm.message="Unsupported session type."),am.b.reject(bm),am.b=null):zl.sessionId&&am.a?(bm.method="update",am.a.reject(bm),am.a=null):(bm=zl.systemCode,zl.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?he(am,"output-restricted"):1==bm?he(am,"expired"):he(am,"internal-error"));}};function ee(zl,am){var bm=zl.f[am];return bm?bm:(bm=zl.c.shift())?(bm.sessionId=am,zl.f[am]=bm):null;}function fe(zl,am,bm){sc.call(this,null);this.f=zl;this.h=false;this.a=this.b=null;this.c=am;this.g=bm;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ie();}m(fe,sc);function ge(zl,am,bm){if(zl.h)return Promise.reject(Error("The session is already initialized."));zl.h=true;var cm;try{if("persistent-license"==zl.g){if(bm){cm=qd("LOAD_SESSION|"+bm);}else{var em=new Uint8Array(am);cm=qd("PERSISTENT|"+pd(em));}}else cm=new Uint8Array(am);}catch(dm){return Promise.reject(dm);}zl.b=new xc();try{zl.f.webkitGenerateKeyRequest(zl.c,cm);}catch(fm){if("InvalidStateError"!=fm.name)return zl.b=null,Promise.reject(fm);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,cm);}catch(gm){this.b.reject(gm),this.b=null;}}.bind(zl),10);}return zl.b;}j=fe.prototype;j.Ka=function(zl,am){if(this.a){this.a.then(this.Ka.bind(this,zl,am)).catch(this.Ka.bind(this,zl,am));}else{this.a=zl;var bm,cm;"webkit-org.w3.clearkey"==this.c?(bm=pd(new Uint8Array(am)),cm=JSON.parse(bm),"oct"!=cm.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),bm=rd(cm.keys[0].k),cm=rd(cm.keys[0].kid)):(bm=new Uint8Array(am),cm=null);try{this.f.webkitAddKey(this.c,bm,cm,this.sessionId);}catch(dm){this.a.reject(dm),this.a=null;}}};function he(zl,am){zl.keyStatuses.Ha(am);var bm=xb({type:"keystatuseschange"});zl.dispatchEvent(bm);}j.generateRequest=function(zl,am){return ge(this,am,null);};j.load=function(zl){return "persistent-license"==this.g?ge(this,null,zl):Promise.reject(Error("Not a persistent session."));};j.update=function(zl){var am=new xc();this.Ka(am,zl);return am;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function ie(){this.size=0;this.a=void 0;}var je;j=ie.prototype;j.Ha=function(zl){this.size=void 0==zl?0:1;this.a=zl;};j.Ca=function(){return this.a;};j.forEach=function(zl){this.a&&zl(je,this.a);};j.get=function(zl){if(this.has(zl))return this.a;};j.has=function(zl){var am=je;return this.a&&td(new Uint8Array(zl),new Uint8Array(am))?true:false;};function ke(zl){this.systemIds=[];this.cencKeyIds=[];this.a=[];zl=new gb(new DataView(zl.buffer));try{for(;ib(zl);){var bm=zl.a,cm=kb(zl),dm=kb(zl);1==cm?cm=lb(zl):0==cm&&(cm=zl.b.byteLength-bm);if(1886614376!=dm){nb(zl,cm-(zl.a-bm));}else{var em=jb(zl);if(1<em){nb(zl,cm-(zl.a-bm));}else{nb(zl,3);var fm=sd(mb(zl)),gm=[];if(0<em)for(var hm=kb(zl),im=0;im<hm;++im){var jm=sd(mb(zl));gm.push(jm);}var km=kb(zl);nb(zl,km);this.cencKeyIds.push.apply(this.cencKeyIds,gm);this.systemIds.push(fm);this.a.push({start:bm,end:zl.a-1});zl.a!=bm+cm&&nb(zl,cm-(zl.a-bm));}}}}catch(am){}}function le(zl,am){try{var cm=new me(zl,am);return Promise.resolve(cm);}catch(bm){return Promise.reject(bm);}}function me(zl,am){this.keySystem=zl;for(var bm=false,cm=0;cm<am.length;++cm){var dm=am[cm],em={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:dm.initDataTypes,sessionTypes:["temporary"]},fm=false;if(dm.audioCapabilities)for(var gm=0;gm<dm.audioCapabilities.length;++gm){var hm=dm.audioCapabilities[gm];if(hm.contentType){var fm=true,im=hm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,im)&&(em.audioCapabilities.push(hm),bm=true);}}if(dm.videoCapabilities)for(gm=0;gm<dm.videoCapabilities.length;++gm)hm=dm.videoCapabilities[gm],hm.contentType&&(fm=true,im=hm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,im)&&(em.videoCapabilities.push(hm),bm=true));fm||(bm=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==dm.persistentState&&(em.persistentState="required",em.sessionTypes=["persistent-license"]);if(bm){this.a=em;return;}}bm=Error("Unsupported keySystem");bm.name="NotSupportedError";bm.code=DOMException.NOT_SUPPORTED_ERR;throw bm;}me.prototype.createMediaKeys=function(){var zl=new oe(this.keySystem);return Promise.resolve(zl);};me.prototype.getConfiguration=function(){return this.a;};function ne(zl){var am=this.mediaKeys;am&&am!=zl&&pe(am,null);delete this.mediaKeys;return (this.mediaKeys=zl)?pe(zl,this):Promise.resolve();}function oe(zl){this.a=new MSMediaKeys(zl);this.b=new oc();}oe.prototype.createSession=function(zl){if("temporary"!=(zl||"temporary"))throw new TypeError("Session type "+zl+" is unsupported on this platform.");return new qe(this.a);};oe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function pe(zl,am){function bm(){am.msSetMediaKeys(cm.a);am.removeEventListener("loadedmetadata",bm);}qc(zl.b);if(!am)return Promise.resolve();pc(zl.b,am,"msneedkey",re);var cm=zl;try{return 1<=am.readyState?am.msSetMediaKeys(zl.a):am.addEventListener("loadedmetadata",bm),Promise.resolve();}catch(dm){return Promise.reject(dm);}}function qe(zl){sc.call(this,null);this.c=null;this.g=zl;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ue();}m(qe,sc);j=qe.prototype;j.generateRequest=function(zl,am){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(am),null),pc(this.f,this.c,"mskeymessage",this.yb.bind(this)),pc(this.f,this.c,"mskeyadded",this.wb.bind(this)),pc(this.f,this.c,"mskeyerror",this.xb.bind(this)),te(this,"status-pending");}catch(bm){this.a.reject(bm);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(zl){this.b=new xc();try{this.c.update(new Uint8Array(zl));}catch(am){this.b.reject(am);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(zl){this.closed.reject(zl);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function re(zl){var am=zl.initData;if(am){var bm=new ke(am);if(1>=bm.a.length){zl=am;}else{var cm=[];for(zl=0;zl<bm.a.length;zl++)cm.push(am.subarray(bm.a[zl].start,bm.a[zl].end+1));am=db(cm,se);for(zl=bm=0;zl<am.length;zl++)bm+=am[zl].length;bm=new Uint8Array(bm);for(zl=cm=0;zl<am.length;zl++)bm.set(am[zl],cm),cm+=am[zl].length;zl=bm;}}else zl=am;zl=xb({type:"encrypted",initDataType:"cenc",initData:zl});this.dispatchEvent(zl);}function se(zl,am){return td(zl,am);}j.yb=function(zl){this.a&&(this.a.resolve(),this.a=null);zl=xb({type:"message",messageType:void 0==this.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:zl.message.buffer});this.dispatchEvent(zl);};j.wb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(te(this,"usable"),this.b.resolve(),this.b=null);};j.xb=function(){var zl=Error("EME v20140218 key error");zl.errorCode=this.c.error;if(null!=this.a){this.a.reject(zl),this.a=null;}else if(null!=this.b){this.b.reject(zl),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:te(this,"output-not-allowed");default:te(this,"internal-error");}};function te(zl,am){zl.keyStatuses.Ha(am);var bm=xb({type:"keystatuseschange"});zl.dispatchEvent(bm);}function ue(){this.size=0;this.a=void 0;}var ve;j=ue.prototype;j.Ha=function(zl){this.size=void 0==zl?0:1;this.a=zl;};j.Ca=function(){return this.a;};j.forEach=function(zl){this.a&&zl(ve,this.a);};j.get=function(zl){if(this.has(zl))return this.a;};j.has=function(zl){var am=ve;return this.a&&td(new Uint8Array(zl),new Uint8Array(am))?true:false;};function we(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(je=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=zd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ae,i.MediaKeys=ce,i.MediaKeySystemAccess=be):i.MSMediaKeys?(ve=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ne,i.MediaKeys=oe,i.MediaKeySystemAccess=me,Navigator.prototype.requestMediaKeySystemAccess=le):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",we);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();we();});var xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ye(zl){var am;zl instanceof ye?(ze(this,zl.S),this.Y=zl.Y,this.O=zl.O,af(this,zl.ha),this.P=zl.P,bf(this,zl.a.clone()),this.W=zl.W):zl&&(am=String(zl).match(xe))?(ze(this,am[1]||"",true),this.Y=cf(am[2]||""),this.O=cf(am[3]||"",true),af(this,am[4]),this.P=cf(am[5]||"",true),bf(this,am[6]||"",true),this.W=cf(am[7]||"")):this.a=new lf(null);}j=ye.prototype;j.S="";j.Y="";j.O="";j.ha=null;j.P="";j.W="";j.toString=function(){var zl=[],am=this.S;am&&zl.push(df(am,ff,true),":");if(am=this.O){zl.push("//");var bm=this.Y;bm&&zl.push(df(bm,ff,true),"@");zl.push(encodeURIComponent(am).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));am=this.ha;null!=am&&zl.push(":",String(am));}if(am=this.P)this.O&&"/"!=am.charAt(0)&&zl.push("/"),zl.push(df(am,"/"==am.charAt(0)?hf:gf,true));(am=this.a.toString())&&zl.push("?",am);(am=this.W)&&zl.push("#",df(am,kf));return zl.join("");};j.resolve=function(zl){var am=this.clone();"data"===am.S&&(am=new ye());var bm=!!zl.S;bm?ze(am,zl.S):bm=!!zl.Y;bm?am.Y=zl.Y:bm=!!zl.O;bm?am.O=zl.O:bm=null!=zl.ha;var cm=zl.P;if(bm){af(am,zl.ha);}else if(bm=!!zl.P){if("/"!=cm.charAt(0))if(this.O&&!this.P){cm="/"+cm;}else{var dm=am.P.lastIndexOf("/");-1!=dm&&(cm=am.P.substr(0,dm+1)+cm);}if(".."==cm||"."==cm){cm="";}else if(-1!=cm.indexOf("./")||-1!=cm.indexOf("/.")){for(var dm=0==cm.lastIndexOf("/",0),cm=cm.split("/"),em=[],fm=0;fm<cm.length;){var gm=cm[fm++];"."==gm?dm&&fm==cm.length&&em.push(""):".."==gm?((1<em.length||1==em.length&&""!=em[0])&&em.pop(),dm&&fm==cm.length&&em.push("")):(em.push(gm),dm=true);}cm=em.join("/");}}bm?am.P=cm:bm=""!==zl.a.toString();bm?bf(am,zl.a.clone()):bm=!!zl.W;bm&&(am.W=zl.W);return am;};j.clone=function(){return new ye(this);};function ze(zl,am,bm){zl.S=bm?cf(am,true):am;zl.S&&(zl.S=zl.S.replace(/:$/,""));}function af(zl,am){if(am){am=Number(am);if(isNaN(am)||0>am)throw Error("Bad port number "+am);zl.ha=am;}else zl.ha=null;}function bf(zl,am,bm){am instanceof lf?zl.a=am:(bm||(am=df(am,jf)),zl.a=new lf(am));}function cf(zl,am){return zl?am?decodeURI(zl):decodeURIComponent(zl):"";}function df(zl,am,bm){return "string"==typeof zl?(zl=encodeURI(zl).replace(am,ef),bm&&(zl=zl.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),zl):null;}function ef(zl){zl=zl.charCodeAt(0);return "%"+(zl>>4&15).toString(16)+(zl&15).toString(16);}var ff=/[#\/\?@]/g,gf=/[\#\?:]/g,hf=/[\#\?]/g,jf=/[\#\?@]/g,kf=/#/g;function lf(zl){this.b=zl||null;}lf.prototype.a=null;lf.prototype.c=null;function mf(zl,am,bm){if(!zl.a&&(zl.a={},zl.c=0,zl.b))for(var cm=zl.b.split("&"),dm=0;dm<cm.length;dm++){var em=cm[dm].indexOf("="),fm=null,gm=null;0<=em?(fm=cm[dm].substring(0,em),gm=cm[dm].substring(em+1)):fm=cm[dm];fm=decodeURIComponent(fm.replace(/\+/g," "));gm=gm||"";mf(zl,fm,decodeURIComponent(gm.replace(/\+/g," ")));}zl.b=null;(cm=zl.a.hasOwnProperty(am)&&zl.a[am])||(zl.a[am]=cm=[]);cm.push(bm);zl.c++;}lf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var zl=[],am;for(am in this.a)for(var bm=encodeURIComponent(am),cm=this.a[am],dm=0;dm<cm.length;dm++){var em=bm;""!==cm[dm]&&(em+="="+encodeURIComponent(cm[dm]));zl.push(em);}return this.b=zl.join("&");};lf.prototype.clone=function(){var zl=new lf();zl.b=this.b;if(this.a){var am={},bm;for(bm in this.a)am[bm]=this.a[bm].concat();zl.a=am;zl.c=this.c;}return zl;};function nf(zl,am,bm){zl=(new DOMParser()).parseFromString(zl,"text/xml");if(!zl)return null;am=am||[new ye("")];bm=bm||[new ye("")];return lg({gb:am,u:bm},zl,of);}l("shaka.dash.mpd.parseMpd",nf);function of(){this.id=this.url=null;this.type="static";this.b=this.j=this.u=this.gb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function pf(){this.g=this.f=this.c=this.u=this.a=this.start=this.id=null;this.b=[];}function qf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.u=null;this.j=[];this.a=[];}function rf(){this.value=null;}function sf(){this.contentType=this.lang=this.id=null;}function tf(){this.a=this.b=this.g=this.u=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function uf(){this.b=this.a=this.c=this.f=null;}function vf(){this.parsedPssh=this.psshBox=null;}function wf(){this.url=null;}function xf(){this.url=null;}function yf(){this.u=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}yf.prototype.clone=function(){var zl=new yf();zl.u=pg(this.u);zl.h=this.h;zl.g=this.g;zl.a=qg(this.a);zl.f=qg(this.f);zl.b=qg(this.b);zl.c=qg(this.c);return zl;};function zf(){this.a=this.url=null;}zf.prototype.clone=function(){var zl=new zf();zl.url=pg(this.url);zl.a=qg(this.a);return zl;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var zl=new ag();zl.url=pg(this.url);zl.a=qg(this.a);return zl;};function bg(){this.u=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bg.prototype.clone=function(){var zl=new bg();zl.u=pg(this.u);zl.a=this.a;zl.g=this.g;zl.c=this.c;zl.i=this.i;zl.h=qg(this.h);zl.b=pg(this.b)||[];zl.f=qg(this.f);return zl;};function cg(){this.a=this.b=null;}cg.prototype.clone=function(){var zl=new cg();zl.b=pg(this.b);zl.a=qg(this.a);return zl;};function dg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}dg.prototype.clone=function(){var zl=new dg();zl.a=this.a;zl.i=this.i;zl.b=this.b;zl.j=this.j;zl.h=this.h;zl.f=this.f;zl.g=this.g;zl.c=qg(this.c);return zl;};function eg(){this.a=[];}eg.prototype.clone=function(){var zl=new eg();zl.a=pg(this.a)||[];return zl;};function fg(){this.c=this.a=this.b=null;}fg.prototype.clone=function(){var zl=new fg();zl.b=this.b;zl.a=this.a;zl.c=this.c;return zl;};function gg(zl,am){this.ga=zl;this.end=am;}gg.prototype.clone=function(){return new gg(this.ga,this.end);};of.TAG_NAME="MPD";pf.TAG_NAME="Period";qf.TAG_NAME="AdaptationSet";rf.TAG_NAME="Role";sf.TAG_NAME="ContentComponent";tf.TAG_NAME="Representation";uf.TAG_NAME="ContentProtection";vf.TAG_NAME="cenc:pssh";wf.TAG_NAME="BaseURL";xf.TAG_NAME="Location";yf.TAG_NAME="SegmentBase";zf.TAG_NAME="RepresentationIndex";ag.TAG_NAME="Initialization";bg.TAG_NAME="SegmentList";cg.TAG_NAME="SegmentURL";dg.TAG_NAME="SegmentTemplate";eg.TAG_NAME="SegmentTimeline";fg.TAG_NAME="S";of.prototype.parse=function(zl,am){this.url=zl.gb;this.id=rg(am,"id",yg);this.type=rg(am,"type",yg)||"static";this.b=rg(am,"mediaPresentationDuration",tg);this.h=rg(am,"minBufferTime",tg,this.h);this.g=rg(am,"minimumUpdatePeriod",tg,this.g);this.c=rg(am,"availabilityStartTime",sg,this.c);this.f=rg(am,"timeShiftBufferDepth",tg,this.f);this.f=null;this.i=rg(am,"suggestedPresentationDelay",tg,this.i);var bm=zl.u,cm=ng(this,am,wf);this.u=ig(bm,cm);if(cm=lg(this,am,xf))this.j=jg(bm,cm.url);this.a=ng(this,am,pf);};pf.prototype.parse=function(zl,am){this.id=rg(am,"id",yg);this.start=rg(am,"start",tg);this.a=rg(am,"duration",tg);var bm=ng(this,am,wf);this.u=ig(zl.u,bm);this.c=lg(this,am,yf);this.f=lg(this,am,bg);this.g=lg(this,am,dg);this.b=ng(this,am,qf);hg(this);};function hg(zl){for(var am=[],bm=0;bm<zl.b.length;++bm){var cm=zl.b[bm];null!=cm.group&&(am[cm.group]=true);}for(bm=0;bm<zl.b.length;++bm)if(cm=zl.b[bm],null==cm.group){for(var dm=1;1==am[dm];)++dm;am[dm]=true;cm.group=dm;}}qf.prototype.parse=function(zl,am){var bm=lg(this,am,sf)||{},cm=lg(this,am,rf);this.id=rg(am,"id",yg);this.group=rg(am,"group",xg);this.lang=rg(am,"lang",yg,bm.lang);this.contentType=rg(am,"contentType",yg,bm.contentType);this.width=rg(am,"width",wg);this.height=rg(am,"height",wg);this.b=rg(am,"mimeType",yg);this.i=rg(am,"codecs",yg);this.c=cm&&"main"==cm.value;this.lang&&(this.lang=cc(this.lang));bm=ng(this,am,wf);this.u=ig(zl.u,bm);this.j=ng(this,am,uf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=zl.c?kg(this,am,zl.c):lg(this,am,yf);this.g=zl.f?kg(this,am,zl.f):lg(this,am,bg);this.h=zl.g?kg(this,am,zl.g):lg(this,am,dg);this.a=ng(this,am,tf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};rf.prototype.parse=function(zl,am){this.value=rg(am,"value",yg);};sf.prototype.parse=function(zl,am){this.id=rg(am,"id",yg);this.lang=rg(am,"lang",yg);this.contentType=rg(am,"contentType",yg);this.lang&&(this.lang=cc(this.lang));};tf.prototype.parse=function(zl,am){this.id=rg(am,"id",yg);this.bandwidth=rg(am,"bandwidth",wg);this.width=rg(am,"width",wg,zl.width);this.height=rg(am,"height",wg,zl.height);this.f=rg(am,"mimeType",yg,zl.b);this.h=rg(am,"codecs",yg,zl.i);this.fbQualityLabel=rg(am,"FBQualityLabel",yg);this.fbQualityClass=rg(am,"FBQualityClass",yg);this.lang=zl.lang;var bm=ng(this,am,wf);this.u=ig(zl.u,bm);this.c=ng(this,am,uf);this.g=zl.f?kg(this,am,zl.f):lg(this,am,yf);this.b=zl.g?kg(this,am,zl.g):lg(this,am,bg);this.a=zl.h?kg(this,am,zl.h):lg(this,am,dg);this.c=this.c.concat(zl.j);};uf.prototype.parse=function(zl,am){this.f=am;this.c=rg(am,"schemeIdUri",yg);var bm=rg(am,"cenc:default_KID",yg);bm&&(this.b=bm.replace(/[-]/g,""));this.a=lg(this,am,vf);};vf.prototype.parse=function(zl,am){var bm=og(am);if(bm){this.psshBox=rd(bm);try{this.parsedPssh=new ke(this.psshBox);}catch(cm){if(!(cm instanceof RangeError))throw cm;}}};wf.prototype.parse=function(zl,am){this.url=og(am);};xf.prototype.parse=function(zl,am){this.url=og(am);};yf.prototype.parse=function(zl,am){this.u=zl.u||this.u;this.h=rg(am,"timescale",wg,this.h);this.g=rg(am,"presentationTimeOffset",xg,this.g);this.a=rg(am,"indexRange",ug,this.a);this.f=rg(am,"FBFirstSegmentRange",ug,this.f);this.b=lg(this,am,zf)||this.b;this.c=lg(this,am,ag)||this.c;};zf.prototype.parse=function(zl,am){var bm=rg(am,"sourceURL",yg);this.url=jg(zl.u,bm);this.a=rg(am,"range",ug,qg(zl.a));};ag.prototype.parse=function(zl,am){var bm=rg(am,"sourceURL",yg);this.url=jg(zl.u,bm);this.a=rg(am,"range",ug);};bg.prototype.parse=function(zl,am){this.u=zl.u||this.u;this.a=rg(am,"timescale",wg,this.a);this.g=rg(am,"presentationTimeOffset",xg,this.g);this.c=rg(am,"duration",wg,this.c);var bm=rg(am,"startNumber",wg);null!=bm&&(this.i=bm);this.h=lg(this,am,ag)||this.h;this.b=(bm=ng(this,am,cg))&&0<bm.length?bm:this.b;this.f=lg(this,am,eg)||this.f;};cg.prototype.parse=function(zl,am){var bm=rg(am,"media",yg);this.b=jg(zl.u,bm);this.a=rg(am,"mediaRange",ug);};dg.prototype.parse=function(zl,am){this.a=rg(am,"timescale",wg,this.a);this.i=rg(am,"presentationTimeOffset",xg,this.i);this.b=rg(am,"duration",wg,this.b);var bm=rg(am,"startNumber",xg);null!=bm&&(this.j=bm);this.h=rg(am,"media",yg,this.h);this.f=rg(am,"index",yg,this.f);this.g=rg(am,"initialization",yg,this.g);this.c=lg(this,am,eg)||this.c;};eg.prototype.parse=function(zl,am){this.a=ng(this,am,fg);};fg.prototype.parse=function(zl,am){this.b=rg(am,"t",xg);this.a=rg(am,"d",xg);this.c=rg(am,"r",vg);};function ig(zl,am){if(!am||0===am.length)return zl;for(var bm=[],cm=0;cm<am.length;cm++){var dm=am[cm].url;null==zl||0===zl.length?bm.push(new ye(dm)):(dm=jg(zl.slice(0,1),dm),bm.push(dm[0]));}return bm;}function jg(zl,am){if(!am)return zl;var bm=new ye(am);return zl?zl.map(function(cm){return cm.resolve(bm);}):[bm];}function kg(zl,am,bm){var cm=qg(bm);(am=mg(am,bm.constructor.TAG_NAME))&&cm.parse(zl,am);return cm;}function lg(zl,am,bm){var cm=null;if(am=mg(am,bm.TAG_NAME))cm=new bm(),cm.parse(zl,am);return cm;}function mg(zl,am){for(var bm=null,cm=0;cm<zl.childNodes.length;cm++)if(zl.childNodes[cm].tagName==am){if(bm)return null;bm=zl.childNodes[cm];}return bm;}function ng(zl,am,bm){for(var cm=[],dm=0;dm<am.childNodes.length;dm++)if(am.childNodes[dm].tagName==bm.TAG_NAME){var em=new bm();em.parse.call(em,zl,am.childNodes[dm]);cm.push(em);}return cm;}function og(zl){zl=zl.firstChild;return zl.nodeType!=Node.TEXT_NODE?null:zl.nodeValue;}function pg(zl){return zl?zl.map(function(am){return am.clone();}):null;}function qg(zl){return zl?zl.clone():null;}function rg(zl,am,bm,cm){zl=bm(zl.getAttribute(am));return null!=zl?zl:void 0!==cm?cm:null;}function sg(zl){if(!zl)return null;zl=Date.parse(zl);return isNaN(zl)?null:Math.floor(zl/1000);}function tg(zl){if(!zl)return null;var am=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(zl);if(!am)return null;zl=0;var bm=xg(am[1]);bm&&(zl+=31536000*bm);(bm=xg(am[2]))&&(zl+=2592000*bm);(bm=xg(am[3]))&&(zl+=86400*bm);(bm=xg(am[4]))&&(zl+=3600*bm);(bm=xg(am[5]))&&(zl+=60*bm);am=i.parseFloat(am[6]);(am=isNaN(am)?null:am)&&(zl+=am);return zl;}function ug(zl){var am=/([0-9]+)-([0-9]+)/.exec(zl);if(!am)return null;zl=xg(am[1]);if(null==zl)return null;am=xg(am[2]);return null==am?null:new gg(zl,am);}function vg(zl){zl=i.parseInt(zl,10);return isNaN(zl)?null:zl;}function wg(zl){zl=i.parseInt(zl,10);return 0<zl?zl:null;}function xg(zl){zl=i.parseInt(zl,10);return 0<=zl?zl:null;}function yg(zl){return zl;}function zg(zl,am){this.url=zl;this.b=am||new ah();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",zg);function ah(){this.body=null;this.a=1;this.j=1000;this.c=0;this.method="GET";this.h="arraybuffer";this.b={};this.i=this.l=false;this.g=this.f=this.m=null;}var bh=true;function ch(zl){dh(zl);zl.b.body=null;zl.c.destroy();zl.c=null;zl.f=null;}function dh(zl){zl.a&&(zl.a.onload=null,zl.a.onreadystatechange=null,zl.a.onerror=null,zl.a.ontimeout=null);zl.a=null;}var eh=/(.*)\.(xx|fna)\.fbcdn\.net/;zg.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var zl=this.url.split(":")[1].split(";").pop().split(","),am=zl.pop(),am="base64"==zl.pop()?i.atob(am.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(am);"arraybuffer"==this.b.h&&(am=qd(am).buffer);zl=JSON.parse(JSON.stringify(new XMLHttpRequest()));zl.response=am;zl.responseText=am.toString();am=this.c;am.resolve(zl);ch(this);return am;}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();this.g||(this.g=this.b.j);this.a=new XMLHttpRequest();var bm=this.url;bh&&(this.f&&!this.f.supportsCaching()||this.b.i)&&(bm=new ye(bm),mf(bm.a,"_",Date.now()),bm=bm.toString());am=eh.test(bm);null!=this.b.g&&am&&(bm=new ye(bm),mf(bm.a,"x-fb-dash-push-segments",this.b.g),bm=bm.toString());null!=this.b.f&&am&&(bm=new ye(bm),mf(bm.a,"x-fb-dash-latest-segment-start-time",this.b.f),bm=bm.toString());this.a.open(this.b.method,bm,true);this.a.responseType=this.b.h;this.a.timeout=this.b.c;this.a.withCredentials=this.b.l;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.m.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.s.bind(this);for(zl in this.b.b)this.a.setRequestHeader(zl,this.b.b[zl]);this.a.send(this.b.body);return this.c;};zg.prototype.send=zg.prototype.i;function fh(zl,am,bm){am=Error(am);am.type=bm;am.status=zl.a.status;am.url=zl.url;am.method=zl.b.method;am.body=zl.b.body;am.Rb=zl.a;return am;}zg.prototype.l=function(zl){this.f&&this.f.sample(Date.now()-this.j,zl.loaded);zl=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),ch(this)):this.h<this.b.a&&-1===zl.indexOf(this.a.status)?gh(this):(zl=fh(this,"HTTP error.","net"),this.c.reject(zl),ch(this));};zg.prototype.m=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ia=Date.now()-this.j,this.b.i)){var zl=Date.parse(this.a.getResponseHeader("Date"));zl&&(fb=zl-Date.now());}};zg.prototype.v=function(){var zl=fh(this,"Network failure.","net");this.c.reject(zl);ch(this);};zg.prototype.s=function(){if(this.h<this.b.a){gh(this);}else{var zl=fh(this,"Request timed out.","net");this.c.reject(zl);ch(this);}};function gh(zl){dh(zl);i.setTimeout(zl.i.bind(zl),zl.g*(1+.5*(2*Math.random()-1)));zl.g*=2;}function hh(zl,am,bm,cm){this.b=am;this.h=bm||0;this.g=null!=cm?cm:null;this.c=this.a=null;this.j=zl;this.i=null;}var ih;l("shaka.util.FailoverUri",hh);function jh(zl,am){return zl&&0!==zl.length?zl.map(function(bm){return bm.resolve(am);}):[am];}hh.setPrefetchCacheValueGetter=function(zl){ih=zl;};function kh(zl,am,bm){if(zl.a)return zl.a;zl.a=lh(zl,0,am||new ah(),bm);return zl.a;}hh.prototype.f=function(){if(this.c){this.a=null;var zl=this.c;if(zl.a&&zl.a.readyState!=XMLHttpRequest.DONE){zl.a.abort();var am=fh(zl,"Request aborted.","aborted");zl.c.reject(am);ch(zl);}this.i=this.c=null;}};function lh(zl,am,bm,cm){var dm=zl.b[am].toString();if(zl.h||zl.g){var em=zl.b[am].O;!em.endsWith("fbcdn.net")||em.startsWith("interncache")||em.endsWith("ak.fbcdn.net")?bm.b.Range="bytes="+(zl.h+"-"+(null!=zl.g?zl.g:"")):dm+="&bytestart="+zl.h+"&byteend="+zl.g;}zl.j&&(dm=zl.j(dm,bm.b)||dm);em=null;ih&&(em=ih(dm));em||(zl.c=new zg(dm,bm),cm&&(zl.c.f=cm),em=zl.c.i());dm=em.then(dd(zl,function(fm){this.i=this.c=this.a=null;this.i=fm.a?new ye(fm.a):this.b[am];fm.response.ia=fm.ia;return Promise.resolve(fm.response);}));return dm=dm.catch(dd(zl,function(fm){if(this.a&&am+1<this.b.length)return this.a=lh(this,am+1,bm,cm);this.a=this.c=null;return Promise.reject(fm);}));}hh.prototype.clone=function(){return new hh(this.j,this.b.map(function(zl){return zl.clone();}),this.h,this.g);};hh.prototype.toString=function(){return this.b[0].toString();};function mh(zl,am,bm,cm){this.a=new ah();this.a.h="text";this.a.a=3;this.a.c=1000*(null!=am?am:0);this.a.g=null!=bm?bm:null;this.a.f=null!=cm?cm:null;this.a.i=true;this.b=zl;}function nh(zl){var am=zl.b;return kh(am,zl.a).then(function(bm){if(bm=nf(bm,am.b,[am.i]))return Promise.resolve(bm);bm=Error("MPD parse failure.");bm.type="dash";return Promise.reject(bm);});}function oh(zl,am,bm,cm){for(var dm=am.a,em=[],fm=0;fm<cm;++fm){var gm=fm+bm,hm=(gm-1)*dm.b,im=hm/dm.a,jm=(hm+dm.b)/dm.a,gm=ph(zl,am,dm.j+gm-1,hm);if(!gm)return null;em.push(new th(im,jm,gm,hm));}return em;}function ph(zl,am,bm,cm){if(!am.a)return null;var dm=am.a.h;if(!dm)return am.u?new hh(zl,am.u,0,null):null;bm=qh(dm,am.id,bm,am.bandwidth,cm);if(!bm)return null;am=jh(am.u,bm);return new hh(zl,am,0,null);}function qh(zl,am,bm,cm,dm){var em={RepresentationID:am,Number:bm,Bandwidth:cm,Time:dm};zl=zl.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(gm,hm,im){if("$$"==gm)return "$";var jm=em[hm];if(null==jm)return gm;"RepresentationID"==hm&&im&&(im=void 0);gm=jm.toString();im=i.parseInt(im,10)||1;im=Math.max(0,im-gm.length);return Array(im+1).join("0")+gm;});try{return new ye(zl);}catch(fm){if(fm instanceof URIError)return null;throw fm;}}function rh(zl,am,bm){var cm=0;am*=bm;zl=zl.a;bm=[];for(var dm=0;dm<zl.length&&zl[dm].a;++dm){var em=zl[dm].b,em=null!=em?em:cm,fm=zl[dm].c||0;0>fm&&(fm=zl[dm].a,fm=dm+1===zl.length?Math.ceil((zl[0].b+am-em)/fm)-1:Math.ceil((zl[dm+1].b-em)/fm)-1);0<bm.length&&em!=cm&&(bm[bm.length-1].end=em);for(var gm=0;gm<=fm;++gm)cm=em+zl[dm].a,bm.push({start:em,end:cm}),em=cm;}return bm;}function sh(zl,am){this.a=zl;this.b=am||null;}sh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};sh.prototype.create=function(){return this.a?kh(this.a):Promise.resolve(this.b);};function th(zl,am,bm,cm){this.b=zl;this.a=am;this.url=bm;this.c=null!=cm?cm:null;}function uh(zl,am,bm){return new th(am,bm,zl.url,null!=zl.c?zl.c:void 0);}function vh(zl,am){for(var bm=zl.length-1;0<=bm;--bm){var cm=zl[bm];if(am>=cm.b&&(null==cm.a||am<cm.a))return bm;}return -1;}function wh(zl,am){return zl.map(function(bm){return uh(bm,bm.b+am,null!=bm.a?bm.a+am:null);});}function xh(){}xh.prototype.parse=function(zl,am,bm,cm,dm){var em=null;try{zl:{var gm=[],hm=new gb(zl),im=kb(hm);if(1936286840!=kb(hm)){em=null;}else{1==im&&(im=lb(hm));var jm=jb(hm);nb(hm,3);nb(hm,4);var km=kb(hm);if(0==km){em=null;}else{var lm,mm;0==jm?(lm=kb(hm),mm=kb(hm)):(lm=lb(hm),mm=lb(hm));nb(hm,2);var nm=hm.b.getUint16(hm.a,hm.c);hm.a+=2;zl=lm;am=am+im+mm;for(mm=im=0;mm<nm;mm++){var om=kb(hm);lm=(om&2147483648)>>>31;var jm=om&2147483647,pm=kb(hm);kb(hm);if(1==lm){em=null;break zl;}var qm;qm=0==mm&&dm?dm:new hh(cm,bm,am,am+jm-1);lm=zl/km;var rm=(zl+pm)/km;0===mm&&(im=lm);gm.push(new th(lm-im,rm-im,qm));zl+=pm;am+=jm;}em=gm;}}};}catch(fm){if(!(fm instanceof RangeError))throw fm;}return em;};function yh(zl){this.a=zl;this.T=0;this.j=[];}yh.prototype.R=function(){return Math.floor((this.j.length-1-this.j.lastIndexOf(true))/2);};yh.prototype.getConsecutiveUpdatesWithoutChanges=yh.prototype.R;yh.prototype.A=function(){return this.j.length-1-this.j.lastIndexOf(false);};yh.prototype.getConsecutiveUpdatesWithChanges=yh.prototype.A;yh.prototype.destroy=function(){this.a=null;};j=yh.prototype;j.length=function(){return this.a.length;};function zh(zl){if(0==zl.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return zl.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(zl){if(0>zl||zl>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[zl];};j.ka=function(zl){zl=vh(this.a,zl);return 0<=zl?this.a[zl]:null;};j.Ea=function(zl){ai(this,zl);return true;};function ai(zl,am){zl.T!=am.T&&(am=new yh(wh(am.a,zl.T-am.T)));if(0==zl.length()){zl.a=am.a.slice(0);}else if(0!=am.length()&&null!=zl.w().a&&!(null!=am.w().a&&am.w().a<zl.w().a)){if(zl.w().a<=zh(am).b){var bm=uh(zl.w(),zl.w().b,zh(am).b),bm=zl.a.slice(0,-1).concat([bm]);}else{var cm;for(cm=0;cm<zl.a.length&&!(zl.a[cm].a>=zh(am).b);++cm);zl.a[cm].b<zh(am).b?(bm=uh(zl.a[cm],zl.a[cm].b,zh(am).b),bm=zl.a.slice(0,cm).concat([bm])):(zh(zl).b>zh(am).b||zh(am),bm=zl.a.slice(0,cm));}zl.a=bm.concat(am.a);}}j.ja=function(zl){var am=zl-this.T;if(0==am)return 0;this.a=wh(this.a,am);this.T=zl;return am;};j.Aa=function(){return 0<this.length()?{start:zh(this).b,end:this.w().a}:{start:0,end:0};};function bi(zl,am,bm,cm){yh.call(this,zl);this.h=am;this.B=bm;this.g=cm;this.i=this.h.b||this.h.a.reduce(function(dm,em){return null==em.a?NaN:dm+em.a;},0)||0;this.b=this.s=this.f=null;ci(this);}m(bi,yh);bi.prototype.destroy=function(){this.B=this.h=null;yh.prototype.destroy.call(this);};bi.prototype.ka=function(zl){ei(this,eb()/1000);return yh.prototype.ka.call(this,zl);};bi.prototype.Ea=function(zl){if(!(zl instanceof bi))return false;ai(this,zl);this.i=Math.max(this.i,zl.i);null==this.f?(this.g=zl.g,ci(this)):fi(this);return true;};function ci(zl){fi(zl);if(0!=zl.length()){zl.length();var am=null!=zl.w().a?zl.w().a:zl.w().b;if(zl.h.c>zl.g){zl.f=am;}else{var bm=zl.g-(zl.h.c+zl.B.start);0>bm?zl.f=am:bm<Math.max(zl.w().b,zl.w().a||0)?(zl.w(),zl.f=am):zl.f=bm;}zl.s=zl.w().b;zl.b=zh(zl).b;}}bi.prototype.ja=function(zl){zl=yh.prototype.ja.call(this,zl);Math.min.apply(null,this.a.filter(function(am){return null!=am.a;}).map(function(am){return am.a-am.b;}));null!=this.f&&(this.s+=zl,this.b+=zl,this.f+=zl);return zl;};bi.prototype.Aa=function(){return di(this,eb()/1000);};function di(zl,am){ei(zl,am);if(null==zl.f||null==zl.s||null==zl.b)return {start:0,end:0};var bm=Number.POSITIVE_INFINITY;zl.i&&(bm=zl.i);var cm=am-zl.g,dm=zl.f+cm;null!=zl.h.f&&(dm=dm-zl.b-zl.h.f,0<dm&&(zl.b+=dm));zl.b=Math.min(zl.b,bm);cm=zl.s+cm;if(cm<zl.b)return {start:zl.b,end:zl.b};cm=0<zl.length()?null!=zl.w().a?Math.min(cm,zl.w().a):cm:zl.b;cm=Math.max(cm,zl.b);cm=Math.min(cm,bm);return {start:zl.b,end:cm};}function ei(zl,am){fi(zl);if(null!=zl.h.f)if(null==zl.f){zl.length();}else{for(var bm=zl.f+(am-zl.g),cm=0,dm=0;dm<zl.a.length;++dm){var em=null;dm<zl.a.length-1?em=zl.a[dm+1].a:(em=zl.a[dm],em=null!=em.a?em.a+(em.a-em.b):null);if(null!=em&&em<bm-zl.h.f){++cm;}else break;}0<cm&&zl.a.splice(0,cm);}}function fi(zl){if(zl.i){for(var am=0,bm=zl.a.length-1;0<=bm;--bm)if(zl.a[bm].b>zl.i){++am;}else break;0<am&&zl.a.splice(-am);}}function gi(zl,am,bm,cm,dm){var em=1,fm=0,gm;if(zl.c>cm){gm=null;}else{var hm=zl.i||0,im=zl.f||0;gm=bm.a;gm=gm.b/gm.a;var jm=cm-(zl.c+am.start);0>jm?gm=null:(im=jm-2*gm-im,0>im&&(im=0),im=Math.ceil(im/gm)*gm,jm-=gm,0>jm?gm=null:(hm=Math.floor(jm/gm)*gm-hm,0>hm&&(hm=0),hm=Math.floor(hm/gm)*gm,gm={Wa:im/gm+1,current:(hm>=im?hm:im)/gm+1}));}gm&&(em=gm.Wa,fm=gm.current-gm.Wa+1);em=oh(dm,bm,em,fm);if(null==em)throw zl=Error("Failed to generate SegmentReferences."),zl.type="stream",zl;bi.call(this,em,zl,am,cm);this.v=bm;this.m=this.c=0<this.length()?zl.c+am.start+this.w().a:null;this.l=gm?gm.current+1:null;this.C=dm;}m(gi,bi);gi.prototype.destroy=function(){this.C=this.v=null;bi.prototype.destroy.call(this);};gi.prototype.ka=function(zl){var am=eb()/1000;hi(this,am);ei(this,am);return yh.prototype.ka.call(this,zl);};gi.prototype.Ea=function(zl){if(null!=this.c||!(zl instanceof gi)||null==zl.c)return false;this.c=zl.c;this.m=zl.m;this.l=zl.l;this.g=zl.g;this.i=zl.i;ai(this,zl);hi(this,eb()/1000);ci(this);return true;};gi.prototype.ja=function(zl){zl=bi.prototype.ja.call(this,zl);null!=this.c&&(this.c+=zl,this.m+=zl);return zl;};gi.prototype.Aa=function(){var zl=eb()/1000;hi(this,zl);return di(this,zl);};function hi(zl,am){if(null!=zl.c&&null!=zl.m&&null!=zl.l){var bm=zl.v.a,bm=bm.b/bm.a,cm=Math.floor((zl.m+(am-zl.g)-zl.c)/bm);if(0!=cm){var dm=oh(zl.C,zl.v,zl.l,cm);Array.prototype.push.apply(zl.a,wh(dm,zl.T));zl.c+=cm*bm;zl.l+=cm;}}}function ii(zl,am,bm,cm,dm){this.f=zl;this.b=am;this.c=bm;this.h=cm;this.a=null;this.g=dm;}ii.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};ii.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new gi(this.f,this.b,this.c,this.h,this.g);}catch(zl){return Promise.reject(zl);}}else{var am;am=this.c.a;if(am=oh(this.g,this.c,1,Math.ceil(this.b.a/(am.b/am.a)))){if(0<am.length){var bm=am[am.length-1];am[am.length-1]=uh(bm,bm.b,this.b.a);}am=new yh(am);}else am=null;this.a=am;if(!this.a)return am=Error("Failed to generate SegmentReferences"),am.type="stream",Promise.reject(am);}return Promise.resolve(this.a);};function ji(zl,am,bm,cm,dm){this.c=zl;this.b=am;this.g=bm;this.a=null;this.h=cm;this.f=dm;}ji.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ji.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var zl=this.g.b,am=[];zl.f&&(am=rh(zl.f,zl.a||1,this.b.a||0));var bm=0;zl.c&&zl.i?bm=(zl.i-1)*zl.c:0<am.length&&(bm=am[0].start-(zl.g||0));var cm=bm,dm=zl.b.length;0<am.length&&am.length!=zl.b.length&&(dm=Math.min(am.length,zl.b.length));for(var em=[],fm=0;fm<dm;++fm){var gm=zl.b[fm],hm=bm/zl.a,im=null,jm=null;zl.c?(im=bm+zl.c,jm=im/zl.a):0<am.length?(im=am[fm].end-(zl.g||0),jm=im/zl.a):(jm=hm+this.b.a,im=jm*zl.a);var bm=im,im=0,km=null;gm.a&&(im=gm.a.ga,km=gm.a.end);jm=Math.min(this.b.a+cm/zl.a,jm);em.push(new th(hm,jm,new hh(this.f,gm.b,im,km)));}"dynamic"==this.c.type?this.a=new bi(em,this.c,this.b,this.h):this.a=new yh(em);return Promise.resolve(this.a);};function ki(zl,am,bm,cm,dm){this.b=zl;this.c=am;this.f=bm;this.h=cm;this.a=null;this.g=dm;}ki.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ki.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var zl=this.f.a,am=rh(zl.c,zl.a||1,this.c.a||0),bm=[],cm=0;cm<am.length;++cm){var dm=am[cm].start,em=dm/zl.a,fm=am[cm].end/zl.a,gm=ph(this.g,this.f,cm+zl.j,dm);if(!gm)return zl=Error("Failed to generate media URL."),zl.type="dash",Promise.reject(zl);var hm=(zl.i||0)/zl.a;bm.push(new th(em-hm,fm-hm,gm,dm));}"dynamic"==this.b.type?this.a=new bi(bm,this.b,this.c,this.h):this.a=new yh(bm);return Promise.resolve(this.a);};function li(){this.D=mi++;this.id=this.J=this.I=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.N=false;this.H=true;}var mi=0;li.prototype.destroy=function(){this.I&&(this.I.destroy(),this.I=null);this.J&&(this.J.destroy(),this.J=null);};function ni(zl){var am=zl.a||"";zl.c&&(am+='; codecs="'+zl.c+'"');return am;}function oi(){this.D=pi++;this.id=null;this.contentType=this.lang="";this.b=false;this.o=[];this.a=[];}var pi=0;oi.prototype.destroy=function(){for(var zl=0;zl<this.o.length;++zl)this.o[zl].destroy();this.a=this.o=null;};function qi(zl){for(var am=[],bm=0;bm<zl.a.length;++bm){var cm=new ti();cm.id=zl.D;cm.a=zl.a[bm];cm.contentType=zl.contentType;cm.b=zl.o.length?ni(zl.o[0]):"";am.push(cm);}return am;}function ri(){this.id=null;this.start=0;this.b=null;this.a=[];}ri.prototype.destroy=function(){for(var zl=0;zl<this.a.length;++zl)this.a[zl].destroy();this.a=null;};function si(){this.b=false;this.i=this.g=this.f=null;this.c=0;this.a=[];this.h=false;}si.prototype.destroy=function(){for(var zl=0;zl<this.a.length;++zl)this.a[zl].destroy();this.a=null;};function ti(){this.id=0;this.a=null;this.b=this.contentType="";}function ui(zl,am,bm,cm,dm,em){sc.call(this,zl);this.c=am;this.a=new ed(bm,cm,dm);this.L=0;this.v=this.F=this.b=null;this.G=false;this.g=this.s=null;this.m=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.A=0;this.K=15;this.M=em;this.B=false;}m(ui,sc);ui.prototype.C=function(zl){null!=zl.initialStreamBufferSize&&(this.A=Number(zl.initialStreamBufferSize));null!=zl.streamBufferSize&&(this.K=Number(zl.streamBufferSize));null!=zl.segmentRequestTimeout&&(this.a.m=Number(zl.segmentRequestTimeout));};ui.prototype.destroy=function(){bj(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.R=this.c=this.a=null;};j=ui.prototype;j.oa=function(){return this.b;};j.Ba=function(){return this.F;};j.kb=function(zl){this.f||zl.then(function(){this.f=true;this.g||aj(this,0);}.bind(this)).catch(function(){});return this.h;};j.Da=function(){return this.l;};j.pa=function(zl,am,bm,cm){zl!=this.b&&(this.v=zl.J.create(),zl.I.create().then(dd(this,function(dm){if(this.c){var em=this.b;this.b=zl;this.F=dm;this.G=true;this.s=cm?cm:null;this.m||(em?am&&vi(this,true,bm):aj(this,0));}})).catch(dd(this,function(dm){"aborted"!=dm.type&&(this.f?(dm=yb(dm),this.dispatchEvent(dm)):this.h.reject(dm));})));};j.hb=function(){return vi(this,false);};function vi(zl,am,bm){zl.b&&!zl.m&&(zl.m=true,bj(zl),ld(zl.a).then(dd(zl,function(){var cm=this.c.currentTime;if(!am&&0<gd(this.a,cm)&&0<=vh(this.a.b,cm))return Promise.resolve();if(bm)return kd(this.a,this.c.currentTime+bm);this.B=true;return jd(this.a);})).then(dd(zl,function(){this.m=false;aj(this,0);})).catch(dd(zl,function(cm){this.m=false;this.f?(cm=yb(cm),this.dispatchEvent(cm)):this.h.reject(cm);})));}j.ib=function(zl){return 0<gd(this.a,zl)&&0<=vh(this.a.b,zl);};j.sa=function(){};j.ya=function(){return true;};j.Fb=function(){if(this.i&&!this.f){this.g=null;}else{var zl;if(zl=this.f&&!this.l)zl=1<this.a.c.buffered.length?true:false;if(zl){vi(this,true);}else{this.g=null;zl=this.b;var am=this.F,bm=this.c.currentTime;if(gd(this.a,this.i?bm:bm+(this.j||0))>=(this.i?Math.max(this.A,this.K):this.A)){xi(this),aj(this,1000/(5*(Math.abs(this.c.playbackRate)||1)));}else{var cm=wi(this,bm,am);cm?(am=id(this.a,cm,zl.b,this.v),this.M&&"video"===zl.a.split("/")[0]&&this.M(cm.b,cm.a,{id:zl.id,reason:this.s}),this.v=null,this.G&&(this.G=false,cm=this.s,this.s=null,yi(this,zl,cm)),this.l=false,am.then(dd(this,function(dm){var em=dm.T;dm=dm.ob;this.i||(this.L=dm);null==this.j&&(this.j=em);this.B&&0<gd(this.a,bm)&&(this.B=false,this.c.currentTime+=.001);aj(this,0);})).catch(dd(this,function(dm){if("aborted"!=dm.type){var em=[0,404,410,502,503,504];"net"==dm.type&&-1!=em.indexOf(dm.Rb.status)&&this.b&&aj(this,1000);dm=yb(dm);this.dispatchEvent(dm);}}))):(xi(this),this.f&&!this.l&&(this.l=true,zi(this)),aj(this,200));}}}};function wi(zl,am,bm){zl=zl.a;var cm=zl.b.length;zl=0<cm?zl.b[cm-1]:null;return null!=zl?null!=zl.a?bm.ka(zl.a):null:bm.ka(am)||(bm.length()?bm.w():null);}function xi(zl){if(!zl.i&&null!=zl.j){zl.i=true;var am=zl.a,bm=zl.j,cm=bm-am.s;0!=cm&&(am.b=wh(am.b,cm),am.s=bm);zl.h.resolve(zl.j);}}function yi(zl,am,bm){var cm=am.a.split("/")[0];am=xb({type:"adaptation",bubbles:true,contentType:cm,size:"video"!=cm?null:{width:am.width,height:am.height},bandwidth:am.bandwidth,reason:bm});zl.dispatchEvent(am);}function zi(zl){var am=xb({type:"ended"});zl.dispatchEvent(am);}function aj(zl,am){zl.g=i.setTimeout(zl.Fb.bind(zl),am);}function bj(zl){null!=zl.g&&(i.clearTimeout(zl.g),zl.g=null);}j.za=function(){return this.L;};function cj(zl){this.b=zl;this.a=null;}cj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};cj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var zl=new th(0,null,this.b);this.a=new yh([zl]);return Promise.resolve(this.a);};function dj(zl,am){sc.call(this,zl);this.b=am;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(dj,sc);dj.prototype.C=function(){};dj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.R=this.b=this.f=this.h=this.a=this.c=null;};j=dj.prototype;j.oa=function(){return this.f;};j.Ba=function(){return this.h;};j.kb=function(){return this.c;};j.Da=function(){return true;};j.pa=function(zl){zl.I.create().then(dd(this,function(am){if(this.b){if(0==am.length())return Promise.reject(Error("No subtitles URL available."));var bm=this.f;this.f=zl;this.h=am;am=zh(am).url.b[0].toString();var cm=this.ya();this.a&&(this.sa(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=am;this.sa(cm);am=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:zl.bandwidth});this.dispatchEvent(am);bm||this.c.resolve(0);}}));};j.hb=function(){};j.ib=function(){return true;};j.sa=function(zl){this.g=zl;this.a&&(this.a.track.mode=zl?"showing":"disabled");};j.ya=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function ej(){}ej.prototype.parse=function(zl,am,bm,cm){var dm=null;try{var fm,gm=new ob(am);if(440786851!=qb(gm).id){fm=null;}else{var hm=qb(gm);if(408125543!=hm.id){fm=null;}else{var im=hm.a.byteOffset,jm,km=new ob(hm.a);for(am=null;ib(km.a);){var lm=qb(km);if(357149030==lm.id){am=lm;break;}}if(am){for(var mm=new ob(am.a),km=1e+06;ib(mm.a);){var nm=qb(mm);if(2807729==nm.id){km=tb(nm);break;}}jm=km/1e+09;}else jm=null;fm=jm?{Lb:im,Pb:jm}:null;}}if(fm){var om=qb(new ob(zl));if(475249515!=om.id){dm=null;}else{var pm=fm.Lb,qm=fm.Pb;zl=[];var rm=new ob(om.a);for(fm=om=-1;ib(rm.a);){var sm=qb(rm);if(187==sm.id){var tm,um=new ob(sm.a),vm=qb(um);if(179!=vm.id){tm=null;}else{var wm=tb(vm),xm=qb(um);if(183!=xm.id){tm=null;}else{for(var ym=new ob(xm.a),im=0;ib(ym.a);){var zm=qb(ym);if(241==zm.id){im=tb(zm);break;}}tm={Qb:wm,Kb:im};}}if(tm){var an=qm*tm.Qb,bn=pm+tm.Kb;if(0<=om){var cn=new hh(cm,bm,fm,bn-1);zl.push(new th(om,an,cn));}om=an;fm=bn;}}}0<=om&&(cn=new hh(cm,bm,fm,null),zl.push(new th(om,null,cn)));dm=zl;}}else dm=null;}catch(em){if(!(em instanceof RangeError))throw em;}return dm;};function fj(zl,am,bm,cm,dm,em,fm,gm){this.h=zl;this.j=am;this.f=bm;this.a=cm;this.g=dm;this.b=em;this.l=fm;this.c=null;this.i=gm;}fj.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};fj.prototype.create=function(){if("webm"==this.f){var zl=Error("WebM is not supported in this build configuration.");zl.type="app";return Promise.reject(zl);}if(this.c)return this.c;zl=[kh(this.a)];"webm"==this.f&&zl.push(kh(this.g));this.b&&kh(this.b);return this.c=Promise.all(zl).then(dd(this,function(am){var bm=am[0];am=am[1]||null;var cm=null;"mp4"==this.f?(cm=new xh(),cm=cm.parse(new DataView(bm),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(cm=new ej(),cm=cm.parse(new DataView(bm),new DataView(am),this.a.b,this.i));if(!cm)return bm=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),bm.type="stream",Promise.reject(bm);var dm;"dynamic"==this.h.type?dm=new bi(cm,this.h,this.j,this.l):dm=new yh(cm);return Promise.resolve(dm);}));};function gj(zl){this.a=zl;}function hj(zl,am,bm){for(var cm=eb()/1000,dm=0;dm<am.a.length;++dm)for(var em=am.a[dm],fm=0;fm<em.b.length;++fm){var gm=em.b[fm];if("text"!=gm.contentType)for(var hm=0;hm<gm.a.length;++hm){var im=gm.a[hm],jm=0,jm=jm+(im.g?1:0),jm=jm+(im.b?1:0),jm=jm+(im.a?1:0);0==jm?(gm.a.splice(hm,1),--hm):1!=jm&&(im.g?(im.b=null,im.a=null):im.b&&(im.a=null));}}ij(am);for(dm=0;dm<am.a.length;++dm)for(em=am.a[dm],fm=0;fm<em.b.length;++fm){hm=gm=em.b[fm];im=null;for(jm=0;jm<hm.a.length;++jm){var km=hm.a[jm].f||"";im?km!=im&&(hm.a.splice(jm,1),--jm):im=km;}0==gm.a.length&&(em.b.splice(fm,1),--fm);}"dynamic"==am.type&&null==am.c&&(am.c=cm);dm=new si();"dynamic"==am.type&&(dm.b=true,dm.f=am.g,dm.g=new hh(bm,am.j||am.url),dm.i=am.c);dm.c=am.h||5;for(em=0;em<am.a.length;++em){fm=am.a[em];if(null==fm.start)break;fm=jj(zl,am,fm,cm,bm);dm.a.push(fm);}return dm;}function ij(zl){if(zl.a.length){null==zl.a[0].start&&(zl.a[0].start=0);var am=function(hm){return 0==hm||!!hm;};"dynamic"==zl.type&&(zl.b=null);am(zl.b)&&1==zl.a.length&&!am(zl.a[0].a)&&(zl.a[0].a=zl.b);for(var bm=0,cm=true,dm=0;dm<zl.a.length;++dm){var em=zl.a[dm-1],fm=zl.a[dm],gm=zl.a[dm+1]||{start:zl.b};!am(fm.start)&&em&&am(em.start)&&am(em.a)&&(fm.start=em.start+em.a);!am(fm.a)&&am(gm.start)&&(fm.a=gm.start-fm.start);null!=fm.start&&null!=fm.a?bm+=fm.a:cm=false;}am(zl.b)||(dm=zl.a[zl.a.length-1],cm?zl.b=bm:am(dm.start)&&am(dm.a)?zl.b=dm.start+dm.a:"dynamic"!=zl.type&&(zl.b=bm));}}function jj(zl,am,bm,cm,dm){var em=new ri();em.id=bm.id;em.start=bm.start;em.b=bm.a;var fm=new kc();bm.b.forEach(function(pm){fm.push(pm.contentType||"",pm);});for(var gm=nc(fm),hm=0;hm<gm.length;++hm){var im=new kc();fm.get(gm[hm]).forEach(function(pm){im.push(pm.group,pm);});for(var jm=nc(im),km=0;km<jm.length;++km){var lm=new kc();im.get(jm[km]).forEach(function(pm){lm.push(pm.lang,pm);});for(var mm=nc(lm),nm=0;nm<mm.length;++nm){var om=lm.get(mm[nm]),om=kj(zl,am,bm,om,cm,dm);em.a.push(om);}}}return em;}function kj(zl,am,bm,cm,dm,em){n(cm.every(function(nm){return nm.group==cm[0].group&&(nm.lang||"")==(cm[0].lang||"")&&(nm.contentType||"")==(cm[0].contentType||"");}));var fm=new oi(),gm=cm.filter(function(nm){return null!=nm.id;});gm.length==cm.length&&(fm.id=gm.map(function(nm){return nm.id;}).sort().reduce(function(nm,om){return nm+","+om;}));fm.lang=cm[0].lang||"";fm.contentType=cm[0].contentType||"";fm.b=cm.some(function(nm){return nm.c;});for(var gm={},hm=0;hm<cm.length;++hm)for(var im=cm[hm],jm=0;jm<im.a.length;++jm){var km=im.a[jm],lm=nj(zl,km),mm=fm.a.slice(0);mj(lm,mm);0==mm.length&&0<fm.a.length||!(km=pj(am,bm,km,dm,em))||(fm.o.push(km),fm.a=mm,gm[km.D]=im);}if(fm.a.some(function(nm){return ""==nm.a;}))return fm.o.forEach(function(nm){nm.N=true;}),fm;zl=lj(cm);for(hm=0;hm<fm.o.length;++hm)km=fm.o[hm],im=gm[km.D],im==zl&&(km.N=true);return fm;}function lj(zl){for(var am=null,bm=null,cm=0;cm<zl.length;++cm)for(var dm=zl[cm],em=0;em<dm.a.length;++em){var fm=dm.a[em],fm=(fm.width||1)*(fm.height||1)*(fm.bandwidth||1);if(null==am||fm<am)am=fm,bm=dm;}return bm;}function mj(zl,am){if(0==am.length){Array.prototype.push.apply(am,zl);}else for(var bm=0;bm<am.length;++bm){for(var cm=false,dm=0;dm<zl.length;++dm){var em=am[bm],fm=zl[dm];if(em.a==fm.a&&em.h==fm.h&&em.l==fm.l&&em.g==fm.g&&em.i==fm.i&&em.f==fm.f&&em.j==fm.j&&td(em.c,fm.c)){cm=true;wd(am[bm],zl[dm].b);break;}}cm||(am.splice(bm,1),--bm);}}function nj(zl,am){var bm=[];if(0==am.c.length){bm.push(new ud());}else if(zl.a)for(var cm=0;cm<am.c.length;++cm)bm.push.apply(bm,oj(zl,am.c[cm]));return bm;}function oj(zl,am){var bm=[];if(2!=zl.a.length)return [];var cm=zl.a(am.c||"",am.f);if(!(cm&&cm instanceof Array))return [];for(var dm=0;dm<cm.length;++dm){var em,fm=cm[dm];em=new ud();if(fm){var gm=hc(fm,"keySystem");if(null!=gm){em.a=gm;}else throw Error("'keySystem' cannot be null.");var hm=hc(fm,"licenseServerUrl");if(null!=hm){em.h=hm;}else if(gm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");gm=fc(fm,"withCredentials");null!=gm&&(em.l=gm);gm=jc(fm,"licensePostProcessor",Function);null!=gm&&(em.m=gm);gm=jc(fm,"licensePreProcessor",Function);null!=gm&&(em.s=gm);gm=fc(fm,"distinctiveIdentifierRequired");null!=gm&&(em.g=gm);gm=fc(fm,"persistentStateRequired");null!=gm&&(em.i=gm);gm=hc(fm,"audioRobustness");null!=gm&&(em.f=gm);gm=hc(fm,"videoRobustness");null!=gm&&(em.j=gm);gm=jc(fm,"serverCertificate",Uint8Array);null!=gm&&(em.c=gm);if(gm=jc(fm,"initData",Object)){fm=jc(gm,"initData",Uint8Array);if(null==fm)throw Error("'initData.initData' cannot be null.");gm=hc(gm,"initDataType");if(null==gm)throw Error("'initData.initDataType' cannot be null.");em.b.push({initData:new Uint8Array(fm.buffer),initDataType:gm});}}0==em.b.length&&am.a&&am.a.psshBox&&wd(em,[{initData:am.a.psshBox,initDataType:"cenc"}]);bm.push(em);}return bm;}function pj(zl,am,bm,cm,dm){if(!bm.u||0===bm.u.length)return null;var em=null,fm=1,gm=0;if(bm.g){em=bm.f.split("/")[1];if("mp4"!=em&&"webm"!=em){em=null;}else{var hm=bm.g;"webm"!=em||hm.c?hm.a||hm.b&&hm.b.a?(fm=hm.b,fm||(fm=new zf(),fm.url=bm.u,fm.a=hm.a?hm.a.clone():null),gm=rj(fm,dm),fm=hm.c?rj(hm.c,dm):null,hm.f?(hm=hm.f,hm=new hh(dm,bm.u,hm.ga,hm.end)):hm=null,zl=new fj(zl,am,em,gm,fm,hm,cm,dm),am=new sh(fm),cm=new li(),cm.I=zl,cm.J=am,em=cm):em=null:em=null;}fm=bm.g.h;gm=bm.g.g;}else if(bm.b){em=bm.b,!em.c&&!em.f&&1<em.b.length?em=null:em.c||am.a||em.f||1!=em.b.length?em.f&&0===em.f.a.length?em=null:(em=em.h?rj(em.h,dm):null,zl=new ji(zl,am,bm,cm,dm),am=new sh(em),cm=new li(),cm.I=zl,cm.J=am,em=cm):em=null,fm=bm.b.a,gm=bm.b.g;}else if(bm.a){zl:if(em=bm.a,fm=0+(em.f?1:0),fm+=em.c?1:0,fm+=em.b?1:0,0==fm?fm=false:(1!=fm&&(em.f?(em.c=null,em.b=null):em.c&&(em.b=null)),fm=true),fm){fm=null;if(em.g&&(fm=(em=bm.a.g)?qj(bm,em,ag):null,!fm)){em=null;break zl;}em=fm?rj(fm,dm):null;fm=bm.a;fm.f?(fm=bm.f.split("/")[1],"mp4"!=fm&&"webm"!=fm?zl=null:"webm"!=fm||em?ph(dm,bm,1,0)?(gm=(gm=bm.a.f)?qj(bm,gm,zf):null)?(gm=rj(gm,dm),zl=new fj(zl,am,fm,gm,em,null,cm,dm)):zl=null:zl=null:zl=null):zl=fm.h?fm.c?new ki(zl,am,bm,cm,dm):fm.b?"dynamic"!=zl.type&&null==am.a?null:new ii(zl,am,bm,cm,dm):null:null;zl?(am=new sh(em),cm=new li(),cm.I=zl,cm.J=am,em=cm):em=null;}else em=null;;fm=bm.a.a;gm=bm.a.i;}else "text"==bm.f.split("/")[0]&&(em=new li(),em.I=new cj(new hh(dm,bm.u)));if(!em)return null;em.id=bm.id;gm&&(em.b=-1*gm/fm);em.bandwidth=bm.bandwidth;em.width=bm.width;em.height=bm.height;em.a=bm.f||"";em.c=bm.h||"";em.fbQualityLabel=bm.fbQualityLabel||null;em.fbQualityClass=bm.fbQualityClass||null;for(zl=0;zl<bm.c.length;++zl)am=bm.c[zl],am.b&&em.f.push(am.b);return em;}function qj(zl,am,bm){am=qh(am,zl.id,null,zl.bandwidth,null);if(!am)return null;bm=new bm();bm.url=jh(zl.u,am);return bm;}function rj(zl,am){var bm=zl.url,cm=0,dm=null;zl.a&&(cm=zl.a.ga,dm=zl.a.end);return new hh(am,bm,cm,dm);}function sj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function tj(zl,am){var bm=new uj(am);zl.streamHistory.push(new vj(bm));if(bm.videoHeight||!zl.streamStats)zl.streamStats=bm;}function uj(zl){this.videoWidth=zl.width;this.videoHeight=zl.height;this.videoMimeType=zl.a;this.videoBandwidth=zl.bandwidth;}function vj(zl){this.timestamp=eb()/1000;this.value=zl;}function wj(zl,am,bm,cm,dm){this.b=new hh(null,[new ye(zl)]);this.a=new ah();this.a.body=am;this.a.method=bm;this.a.a=3;this.a.l=cm;this.a.c=0;zl=dm||{};for(var em in zl)this.a.b[em]=zl[em];}function xj(zl){return kh(zl.b,zl.a).then(function(am){return Promise.resolve(new Uint8Array(am));});}function yj(zl,am,bm){sc.call(this,zl);this.c=am;this.j=bm;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.m=0;this.g=new xc();this.l=null;}m(yj,sc);yj.prototype.destroy=function(){this.R=null;for(var zl=0;zl<this.f.length;++zl)this.f[zl].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};yj.prototype.initialize=function(){var zl=new kc(),am;am=this.j;if(am.C){am=am.a.a[0];for(var bm=[],cm=0;cm<am.a.length;++cm)bm.push.apply(bm,qi(am.a[cm]));am=bm;}else am=[];for(bm=0;bm<am.length;++bm)cm=am[bm],cm.a.a||cm.b&&!gk(cm.b)||zl.push(cm.contentType,cm);for(var bm={},cm=false,dm=0;dm<am.length;++dm){var em=am[dm];if(em.a.a&&!zl.a.hasOwnProperty(em.contentType)){var fm=em.a.a,gm=bm[fm];gm||(gm=em.a,gm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:gm.g?"required":"optional",persistentState:gm.i?"required":"optional",sessionTypes:["temporary"]},bm[fm]=gm);if(em.b&&(fm=em.contentType+"Capabilities",fm in gm)){cm=true;gm[fm]||(gm[fm]=[]);var hm;"audio"==em.contentType?hm=em.a.f:"video"==em.contentType&&(hm=em.a.j);gm[fm].push({contentType:em.b,robustness:hm});}}}if(!cm)if(am.length){this.a=am[0].a;}else throw zl=Error("No DrmInfo exists!"),zl.type="drm",zl;if(0==Object.keys(bm).length)return el(this.j,zl),this.g.resolve(),Promise.resolve();hm=new xc();bm=zj(bm,hm);bm=bm.then(this.v.bind(this,am,zl));hm.reject(null);return bm;};function zj(zl,am){for(var bm in zl)am=am.catch(function(cm,dm){return navigator.requestMediaKeySystemAccess(cm,[dm]);}.bind(null,bm,zl[bm]));return am;}yj.prototype.v=function(zl,am,bm){if(!this.c)return bk();for(var cm=bm.keySystem,dm=bm.getConfiguration(),em=["audio","video"],fm=0;fm<em.length;++fm){var gm=em[fm];if(!am.a.hasOwnProperty(gm)){var hm=dm[gm+"Capabilities"];if(hm){for(var hm=hm[0],im=[],jm={},km=0;km<zl.length;++km){var lm=zl[km],mm=hm?lm.b==hm.contentType:lm.contentType==gm;lm.a.a!=cm||!mm||lm.id in jm||(im.push(lm),jm[lm.id]=true,this.a=this.a?vd(this.a,lm.a):lm.a);}am.set(gm,im);}}}el(this.j,am);return bm.createMediaKeys().then(function(nm){this.h=nm;}.bind(this));};function ak(zl){return zl.c?zl.h?zl.c.setMediaKeys(zl.h).then(dd(zl,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():bk();})).then(dd(zl,function(){if(!this.c)return bk();for(var am=0;am<this.a.b.length;++am){var bm=this.a.b[am];this.s({type:"encrypted",initDataType:bm.initDataType,initData:bm.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.s.bind(this));})):Promise.resolve():bk();}function bk(){var zl=Error("EmeManager destroyed");zl.type="destroy";return Promise.reject(zl);}yj.prototype.s=function(zl){for(var am=new Uint8Array(zl.initData),bm=0;bm<this.b.length;++bm)if(td(am,this.b[bm].data))return;try{var dm=ck(this);}catch(cm){am=yb(cm);this.dispatchEvent(am);this.g.reject(cm);return;}zl=dm.generateRequest(zl.initDataType,zl.initData);this.b.push({data:am,Ga:dm});zl.catch(dd(this,function(em){if(this.c){for(var fm=0;fm<this.b.length;++fm)if(this.b[fm].Ga==dm){this.b.splice(fm,1);break;}fm=yb(em);this.dispatchEvent(fm);this.g.reject(em);}}));this.f.push(dm);};function ck(zl){var am=null,am=zl.h.createSession();pc(zl.i,am,"message",zl.B.bind(zl));pc(zl.i,am,"keystatuseschange",zl.A.bind(zl));return am;}yj.prototype.B=function(zl){dk(this,zl.target,this.a,zl.message);};yj.prototype.A=function(zl){zl=zl.target;var am={};zl.keyStatuses.forEach(function(cm,dm){if("string"==typeof cm){var em=cm;cm=dm;dm=em;}if("com.microsoft.playready"==this.a.a&&16==cm.byteLength){var em=new DataView(cm),fm=em.getUint32(0,true),gm=em.getUint16(4,true),hm=em.getUint16(6,true);em.setUint32(0,fm,false);em.setUint16(4,gm,false);em.setUint16(6,hm,false);}em=sd(new Uint8Array(cm));am[em]=dm;}.bind(this));if(zl.expiration<Date.now()){for(var bm=0;bm<this.b.length;++bm)if(this.b[bm].Ga==zl){this.b.splice(bm,1);break;}zl.close();this.f.splice(this.f.indexOf(zl),1);}hl(this.j,am);};function dk(zl,am,bm,cm){cm=ek(bm,cm);xj(new wj(cm.url,cm.body,cm.method,bm.l,cm.headers)).then(dd(zl,function(dm){bm.m&&(dm=bm.m(dm));return am.update(dm);})).then(dd(zl,function(){var dm=xb({type:"sessionReady",detail:am});this.dispatchEvent(dm);this.m++;this.m>=this.f.length&&this.g.resolve();})).catch(dd(zl,function(dm){dm.Ga=am;dm=yb(dm);this.dispatchEvent(dm);}));}function ek(zl,am){var bm={url:zl.h,body:am.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===zl.a){for(var cm=String.fromCharCode.apply(null,new Uint16Array(bm.body)),cm=(new DOMParser()).parseFromString(cm,"application/xml"),dm=cm.getElementsByTagName("name"),em=cm.getElementsByTagName("value"),fm=0;fm<dm.length;fm++)bm.headers[dm[fm].childNodes[0].nodeValue]=em[fm].childNodes[0].nodeValue;bm.body=i.atob(cm.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!zl.s)return bm;zl.s(bm);bm.url=hc(bm,"url");if(null==bm.url)throw Error("'url' cannot be null.");if(!(bm.body instanceof ArrayBuffer||"string"==typeof bm.body||null==bm.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");bm.method=hc(bm,"method");if("GET"!=bm.method&&"POST"!=bm.method)throw Error("'method' must be either 'GET' or 'POST'.");bm.headers=jc(bm,"headers",Object);if(null==bm.headers)throw Error("'headers' cannot be null.");return bm;}function fk(zl){sc.call(this,null);this.a=zl;this.b=null;this.f=new oc();this.i=this.h=null;this.B=0;this.v=null;this.j=false;this.F=true;this.g=new sj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.C=null;this.s=false;}m(fk,sc);l("shaka.player.Player",fk);fk.version="v1.6.4-fb";fk.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};fk.prototype.Z=function(zl){this.F=zl;};fk.prototype.setResumeAfterBuffering=fk.prototype.Z;function gk(zl){return "text/vtt"==zl?!!i.VTTCue:MediaSource.isTypeSupported(zl);}fk.isTypeSupported=gk;fk.setTextStyle=function(zl){var am=document.getElementById("ShakaPlayerTextStyle");am||(am=document.createElement("style"),am.id="ShakaPlayerTextStyle",document.head.appendChild(am));for(am=am.sheet;am.cssRules.length;)am.deleteRule(0);am.insertRule("::cue { "+x(zl)+" }",0);};fk.prototype.destroy=function(){return this.m().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};fk.prototype.destroy=fk.prototype.destroy;fk.prototype.m=function(){if(!this.b)return Promise.resolve();this.j&&mk(this);this.a.pause();qc(this.f);lk(this);jk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var zl=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new sj();return zl;};fk.prototype.unload=fk.prototype.m;fk.prototype.fa=function(zl){return hk(this,zl,false);};fk.prototype.load=fk.prototype.fa;fk.prototype.L=function(zl){return hk(this,zl,true);};fk.prototype.loadWithSilencedErrors=fk.prototype.L;function hk(zl,am,bm){al(am,zl.a);var cm=zl.m();zl.a.autoplay&&(p("load"),pc(zl.f,zl.a,"timeupdate",zl.ub.bind(zl)));am.Ya(zl.c);am.V=zl.C;zl.C=null;cm=cm.then(dd(zl,function(){return am.Ia();}));cm.catch(dd(zl,function(dm){am.destroy();return Promise.reject(dm);}));return cm.then(dd(zl,function(){if(!this.a)return ik();this.b=am;pc(this.f,this.b,"seekrangechanged",this.Bb.bind(this));this.h=new yj(this,this.a,this.b);return this.h.initialize();})).then(dd(zl,function(){if(!this.a)return ik();pc(this.f,this.a,"error",this.Nb.bind(this));pc(this.f,this.a,"playing",this.Ab.bind(this));pc(this.f,this.a,"pause",this.zb.bind(this));return bl(this.b,this,this.a);})).then(dd(zl,function(){return this.a?ak(this.h):ik();})).then(dd(zl,function(){if(!this.a)return ik();kk(this);})).catch(dd(zl,function(dm){if(!this.a)return ik();if(true!==bm&&"destroy"!=dm.type){var em=yb(dm);this.dispatchEvent(em);}return this.m().then(function(){return Promise.reject(dm);});}));}function ik(){var zl=Error("Player destroyed");zl.type="destroy";return Promise.reject(zl);}j=fk.prototype;j.ub=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.qa(this.a,"timeupdate");};j.Nb=function(){if(this.a.error){var zl=this.a.error.code;zl!=MediaError.MEDIA_ERR_ABORTED&&(zl=Error(nk[zl]||"Unknown playback error."),zl.type="playback",zl=yb(zl),this.dispatchEvent(zl));}};j.Ab=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.l));this.j&&mk(this);};j.zb=function(){q("playing");var zl=r("playing");if(!isNaN(zl)){var am=this.g;am.playTime+=zl/1000;}jk(this);};j.Bb=function(zl){this.B=zl.start;};j.jb=function(){if(!this.a.paused){q("playing");var zl=r("playing");if(!isNaN(zl)){var am=this.g;am.playTime+=zl/1000;p("playing");}}zl=this.g;am=this.a;am.getVideoPlaybackQuality&&(am=am.getVideoPlaybackQuality(),zl.decodedFrames=am.totalVideoFrames,zl.droppedFrames=am.droppedVideoFrames);return this.g;};fk.prototype.getStats=fk.prototype.jb;fk.prototype.ea=function(){return this.b?this.b.M():[];};fk.prototype.getVideoTracks=fk.prototype.ea;fk.prototype.ba=function(){return this.b?this.b.ca():[];};fk.prototype.getAudioTracks=fk.prototype.ba;fk.prototype.da=function(){return this.b?this.b.Za():[];};fk.prototype.getTextTracks=fk.prototype.da;fk.prototype.selectVideoTrack=function(zl,am){return this.b?this.b.selectVideoTrack(zl,void 0==am?true:am):false;};fk.prototype.selectVideoTrack=fk.prototype.selectVideoTrack;fk.prototype.la=function(zl,am,bm){return this.b?jl(this.b,"audio",zl,void 0==am?true:am,bm):false;};fk.prototype.selectAudioTrack=fk.prototype.la;fk.prototype.ma=function(zl){return this.b?jl(this.b,"text",zl,false):false;};fk.prototype.selectTextTrack=fk.prototype.ma;fk.prototype.aa=function(zl){this.b&&fl(this.b,zl);};fk.prototype.enableTextTrack=fk.prototype.aa;fk.prototype.V=function(zl){jk(this);0<=zl?this.a.playbackRate=zl:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),zl));this.l=zl;};fk.prototype.setPlaybackRate=fk.prototype.V;fk.prototype.K=function(){return this.l;};fk.prototype.getPlaybackRate=fk.prototype.K;fk.prototype.na=function(zl){this.C=zl;};fk.prototype.setPlaybackStartTime=fk.prototype.na;fk.prototype.G=function(){return this.b?this.b.$a():false;};fk.prototype.isLive=fk.prototype.G;fk.prototype.$=function(zl){if(zl){var am=fc(zl,"enableAdaptation");null!=am&&(this.c.enableAdaptation=am);am=fc(zl,"usePlaybackRateForBuffering");null!=am&&(this.s=am);am=gc(zl,"streamBufferSize",0);null!=am&&(this.c.streamBufferSize=am);am=gc(zl,"initialStreamBufferSize",0);null!=am&&(this.c.initialStreamBufferSize=am);am=fc(zl,"includeStreamBufferSizeInStartOffset");null!=am&&(this.c.includeStreamBufferSizeInStartOffset=am);am=gc(zl,"liveStreamEndTimeout",0);null!=am&&(this.c.liveStreamEndTimeout=am);am=gc(zl,"licenseRequestTimeout",0);null!=am&&(this.c.licenseRequestTimeout=am);am=gc(zl,"mpdRequestTimeout",0);null!=am&&(this.c.mpdRequestTimeout=am);am=gc(zl,"minMpdRefreshInterval",0);null!=am&&(this.c.minMpdRefreshInterval=am);am=fc(zl,"enableLiveInterruptionDetection");null!=am&&(this.c.enableLiveInterruptionDetection=am);am=gc(zl,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=am&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=am);am=gc(zl,"liveInterruptionConsecutiveUpdatesWithChange");null!=am&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=am);am=fc(zl,"liveSendPushHeaders");null!=am&&(this.c.liveSendPushHeaders=am);am=gc(zl,"segmentRequestTimeout",0);null!=am&&(this.c.segmentRequestTimeout=am);am=hc(zl,"preferredLanguage");null!=am&&(this.c.preferredLanguage=am);am=jc(zl,"restrictions",v);null!=am&&(this.c.restrictions=am.clone());zl=fc(zl,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=zl&&(bh=!zl);this.b&&this.b.Ya(this.c);}};fk.prototype.configure=fk.prototype.$;fk.prototype.ca=function(){return this.c;};fk.prototype.getConfiguration=fk.prototype.ca;function jk(zl){zl.i&&(i.clearTimeout(zl.i),zl.i=null);}function kk(zl){lk(zl);zl.v=i.setTimeout(zl.M.bind(zl),100);}function lk(zl){zl.v&&(i.clearTimeout(zl.v),zl.v=null);}fk.prototype.A=function(zl,am,bm){this.i=null;var cm=(Date.now()-am)/1000*bm;this.a.currentTime<this.B+(this.G()?1:.05)?this.a.pause():(cm=Math.max(this.B,zl+cm),this.a.currentTime=cm,this.i=i.setTimeout(this.A.bind(this,zl,am,bm),250));};function mk(zl){q("buffering");var am=zl.g;am.bufferingTime+=r("buffering")/1000;zl.s&&(zl.a.playbackRate=zl.l);zl.j=false;zl.dispatchEvent(xb({type:"bufferingEnd"}));}fk.prototype.M=function(){kk(this);if(!this.a.ended&&!this.a.seeking){var zl=this.a.buffered,am=zl.length?zl.end(zl.length-1):0,zl=Math.max(am-this.a.currentTime,0),bm=this.a.duration,cm=this.a.currentTime;if(this.j){if(am=Number(this.b.i.initialStreamBufferSize),bm=Math.max(bm-cm-.05,0),dm||zl>am||zl>bm)mk(this),this.F&&!this.s&&this.a.play();}else{var bm=isNaN(bm)?0:Math.max(bm-.05,0),dm;!(this.a.paused||am>=bm||cm>=bm)&&.5>zl&&(this.j=true,this.s?this.a.playbackRate=0:this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"})));}}};var nk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function ok(zl){for(var am=0;am<zl.length;++am)for(var bm=zl[am],cm=0;cm<bm.a.length;++cm){for(var dm=bm.a[cm],em=dm,fm=0;fm<em.o.length;++fm)gk(ni(em.o[fm]))||(em.o.splice(fm,1),--fm);0==dm.o.length&&(bm.a.splice(cm,1),--cm);}}function pk(zl){for(var am=0;am<zl.length;++am)for(var bm=zl[am],cm=0;cm<bm.a.length;++cm)bm.a[cm].o.sort(qk);}function qk(zl,am){var bm=zl.bandwidth||Number.MAX_VALUE,cm=am.bandwidth||Number.MAX_VALUE;return bm<cm?-1:bm>cm?1:0;}function rk(zl){this.a=zl;}rk.prototype.destroy=function(){this.a.destroy();this.a=null;};rk.prototype.update=function(zl){var am=sk(zl),bm=sk(this.a);return Promise.all([am,bm]).then(dd(this,function(cm){var dm=cm[0];cm=cm[1];var em=this.a.a;ok(em);pk(em);zl.b&&!this.a.b&&(zl.h=true);zl.f=this.a.f;zl.g=this.a.g?this.a.g.clone():null;zl.c=this.a.c;em=[];tk(zl,this.a,dm,cm,em);dm=zl.a;ok(dm);pk(dm);return Promise.resolve(em);}));};function sk(zl){function am(cm,dm){return cm.concat(dm);}var bm=zl.a.map(function(cm){return cm.a;}).reduce(am,[]).map(function(cm){return cm.o;}).reduce(am,[]);zl=bm.map(function(cm){return cm.I.create();});return Promise.all(zl).then(function(cm){for(var dm={},em=0;em<bm.length;++em)dm[bm[em].D]=cm[em];return Promise.resolve(dm);});}function tk(zl,am,bm,cm,dm){var em=new kc();zl.a.forEach(function(im,jm){em.push(im.id||""+jm,im);});var fm=new kc();am.a.forEach(function(im,jm){fm.push(im.id||""+jm,im);});zl=nc(em);for(am=0;am<zl.length;++am){var gm=zl[am],hm=em.get(gm);1<hm.length||(gm=fm.get(gm))&&0!=gm.length&&1==gm.length&&(uk(hm[0],gm[0],bm,cm,dm),hm[0].b=gm[0].b);}}function uk(zl,am,bm,cm,dm){var em=new kc();zl.a.forEach(function(im,jm){em.push(im.id||""+jm,im);});var fm=new kc();am.a.forEach(function(im,jm){fm.push(im.id||""+jm,im);});zl=nc(em);for(am=0;am<zl.length;++am){var gm=zl[am],hm=em.get(gm);1<hm.length||(gm=fm.get(gm))&&0!=gm.length&&1==gm.length&&vk(hm[0],gm[0],bm,cm,dm);}}function vk(zl,am,bm,cm,dm){var em=new kc();zl.o.forEach(function(km,lm){em.push(km.id||""+lm,km);});var fm=new kc();am.o.forEach(function(km,lm){fm.push(km.id||""+lm,km);});am={};for(var gm=nc(em),hm=0;hm<gm.length;++hm){var im=gm[hm];am[im]=im;var jm=em.get(im);1<jm.length||((im=fm.get(im))&&0!=im.length?1==im.length&&(wk(jm[0],im[0],bm,cm),jm[0].J=im[0].J,im[0].J=null,jm[0].b=im[0].b):(dm.push(jm[0]),zl.o.splice(zl.o.indexOf(jm[0]),1)));}gm=nc(fm);for(hm=0;hm<gm.length;++hm)im=gm[hm],am[im]||(am[im]=im,im=fm.get(im),zl.o.push(im[0]));}function wk(zl,am,bm,cm){zl=bm[zl.D];cm=cm[am.D];am=zl.length();zl.Ea(cm)&&(cm=zl.length(),zl.j.push(am!==cm),50<zl.j.length&&zl.j.shift());}function xk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",xk);xk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};xk.prototype.initialize=function(zl,am){this.b||this.a||(this.b=zl,this.a=am);};xk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};xk.prototype.enable=function(zl){this.i=zl;};xk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var zl=yk(this);return zl?zl.id:null;};xk.prototype.getInitialSwitchReason=function(){return null;};xk.prototype.getInitialAudioTrackId=function(){return null;};xk.prototype.selectVideoTrack=function(zl,am,bm){this.g&&this.a.selectVideoTrack(zl.id,am,bm);};xk.prototype.l=function(){Date.now()<this.c||this.h();};xk.prototype.h=function(){if(this.i){var zl=yk(this);if(zl){if(zl.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(zl,false);}this.c=Number.POSITIVE_INFINITY;}};xk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function yk(zl){var am=zl.a.M();if(0==am.length)return null;am.sort(fa);var bm;zl:{bm=zl.a.ca();for(var cm=0;cm<bm.length;++cm)if(bm[cm].active){bm=bm[cm];break zl;}bm=null;};bm=bm?bm.bandwidth:0;zl=zl.b.getBandwidth();for(var cm=am[0],dm=0;dm<am.length;++dm){var em=am[dm],fm=dm+1<am.length?am[dm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(em.bandwidth&&(fm=(fm.bandwidth+bm)/.85,zl>=(em.bandwidth+bm)/.95&&zl<=fm&&(cm=em,cm.active)))break;}return cm;}function zk(zl,am,bm){sc.call(this,null);this.a=zl;this.ea=am;this.j=new oc();this.g=new MediaSource();this.f=null;this.wa=0;this.La=false;this.va=0;this.Qa=this.Ra=this.na=3;this.ma=false;this.c=new kc();this.l=bm;this.l.initialize(am,this);this.C=false;this.B="en";this.fa=false;this.G=null;this.v=new xc();this.bb=new xc();this.h=new v();this.A=null;this.Va=1;this.b={};this.aa=new xc();this.Z=0;this.Ua=15;this.s=null;this.Ma=this.Pa=false;this.m={};this.V=this.L=this.K=null;this.i={};this.da=false;this.ab=null;}m(zk,sc);l("shaka.player.StreamVideoSource",zk);zk.prototype.Ya=function(zl){null!=zl.streamBufferSize&&(this.i.streamBufferSize=zl.streamBufferSize);null!=zl.initialStreamBufferSize&&(this.i.initialStreamBufferSize=zl.initialStreamBufferSize);null!=zl.segmentRequestTimeout&&(this.i.segmentRequestTimeout=zl.segmentRequestTimeout);xl(this);null!=zl.includeStreamBufferSizeInStartOffset&&(this.La=Boolean(zl.includeStreamBufferSizeInStartOffset));null!=zl.enableAdaptation&&this.l.enable(Boolean(zl.enableAdaptation));null!=zl.mpdRequestTimeout&&(this.va=Number(zl.mpdRequestTimeout));null!=zl.minMpdRefreshInterval&&(this.na=Number(zl.minMpdRefreshInterval)/1000);null!=zl.liveInterruptionConsecutiveUpdatesWithoutChange&&(this.Ra=Number(zl.liveInterruptionConsecutiveUpdatesWithoutChange));null!=zl.liveInterruptionConsecutiveUpdatesWithChange&&(this.Qa=Number(zl.liveInterruptionConsecutiveUpdatesWithChange));null!=zl.liveStreamEndTimeout&&(this.Ua=Number(zl.liveStreamEndTimeout));null!=zl.preferredLanguage&&(this.B=cc(String(zl.preferredLanguage)));null!=zl.liveSendPushHeaders&&(this.ma=Boolean(zl.liveSendPushHeaders));null!=zl.restrictions&&(this.h=zl.restrictions,this.C&&gl(this));};zk.prototype.destroy=function(){this.v.destroy();this.aa.destroy();this.aa=this.v=null;this.L&&(i.clearTimeout(this.L),this.L=null);this.K&&(i.clearTimeout(this.K),this.K=null);this.m=null;this.j.destroy();this.j=null;ec(this.b).forEach(function(zl){zl.destroy();});this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.R=this.h=this.G=this.f=this.g=this.ea=this.l=null;};function al(zl,am){pc(zl.j,zl.g,"sourceopen",zl.vb.bind(zl));am.src=i.URL.createObjectURL(zl.g);}function bl(zl,am,bm){if(!zl.C)return zl=Error("Cannot call attach() right now."),zl.type="app",Promise.reject(zl);zl.R=am;zl.f=bm;zl.G=am.jb();pc(zl.j,zl.ea,"bandwidth",zl.Ob.bind(zl));zl.a.b&&(pc(zl.j,am,"bufferingStart",zl.tb.bind(zl)),pc(zl.j,am,"bufferingEnd",zl.sb.bind(zl)));am=zl.f.setMediaKeys(zl.f.mediaKeys);zl.bb.then(dd(zl,function(){ll(this).then(dd(this,function(){this.v&&this.v.resolve();})).catch(dd(this,function(cm){this.v&&this.v.reject(cm);}));}));return Promise.all([zl.v,am]);}j=zk.prototype;j.Ia=function(){if(this.C){var zl=Error("Cannot call load() right now.");zl.type="app";return Promise.reject(zl);}if(!this.a||0==this.a.a.length)return zl=Error("The manifest does not specify any content."),zl.type="stream",Promise.reject(zl);zl=this.a.a;ok(zl);pk(zl);if(0==this.a.a.length||0==this.a.a[0].a.length)return zl=Error("The manifest specifies content that cannot be displayed on this browser/platform."),zl.type="stream",Promise.reject(zl);this.C=true;this.i.initialStreamBufferSize=Math.max(this.i.initialStreamBufferSize||0,this.a.c);xl(this);gl(this);return Promise.resolve();};j.lb=function(zl){return zl.R()>=this.Ra;};j.mb=function(zl){return zl.A()>=this.Qa;};j.fb=function(zl){var am=Date.now(),bm=this.K=null,cm,dm;if(this.ma){cm=2;var em=this.b.video;if(em=em?em.Ba():null)em=em.w(),null!=em.c&&(dm=em.c);}em=this.a.g;(zl?this.cb():this.eb(em,cm,dm)).then(dd(this,function(fm){bm=new rk(fm);return bm.update(this.a);})).then(dd(this,function(fm){bm.destroy();bm=null;if(this.da&&ul(this).some(this.lb.bind(this))){var gm=xb({type:"manifestNotUpdating",bubbles:true});this.dispatchEvent(gm);}else if(ul(this).every(this.mb.bind(this))||this.a.h)gm=xb({type:"manifestIsUpdating",bubbles:true}),this.dispatchEvent(gm);(gm=vl(this,ul(this)))&&this.f.paused&&gm.end>this.f.currentTime+10&&(this.f.currentTime=gm.end);if(this.a.h&&this.f.currentTime+.5>this.Z)return this.ra();for(gm=0;gm<fm.length;++gm)dl(this,fm[gm]);this.i.initialStreamBufferSize=Math.max(this.i.initialStreamBufferSize||0,this.a.c);xl(this);gl(this);0==Object.keys(this.b).length?ll(this):cl(this,(Date.now()-am)/1000);})).catch(dd(this,function(fm){bm&&(bm.destroy(),bm=null);"aborted"!=fm.type&&(fm=yb(fm),this.dispatchEvent(fm),this.a&&cl(this,0));}));};j.eb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.cb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function cl(zl,am){if(null!=zl.a.f){var bm=Math.max(zl.a.f,zl.na),bm=Math.max(bm-am,0);zl.K=i.setTimeout(zl.fb.bind(zl,false),1000*bm);}}function dl(zl,am){var bm=am.a.split("/")[0],cm=zl.b[bm];if(cm&&cm.oa()==am){var dm=zl.c.get(am.a.split("/")[0]).map(function(em){return em.o;}).reduce(function(em,fm){return em.concat(fm);},[]).filter(function(em){return em.N&&em.H;});if(0==dm.length){bm=Error("All usable streams have been removed from the manifest.");bm.type="app";bm=yb(bm);zl.dispatchEvent(bm);return;}zl.m[bm].Ja==am&&delete zl.m[bm];cm.pa(dm[0],true);am.destroy();}am.destroy();}j.Mb=function(zl){this.ab=zl;};zk.prototype.setTaggedTimeRangesEntryAdder=zk.prototype.Mb;zk.prototype.M=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var zl=this.b.video,zl=(zl=zl?zl.oa():null)?zl.D:0,am=[],bm=this.c.get("video"),cm=0;cm<bm.length;++cm)for(var dm=bm[cm],em=0;em<dm.o.length;++em){var fm=dm.o[em];if(fm.N&&fm.H){var gm=fm.D,fm=new ea(gm,fm.bandwidth,fm.width,fm.height,fm.id,fm.fbQualityLabel,fm.fbQualityClass);gm==zl&&(fm.active=true);am.push(fm);}}return am;};zk.prototype.getVideoTracks=zk.prototype.M;zk.prototype.ca=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var zl=this.b.audio,zl=(zl=zl?zl.oa():null)?zl.D:0,am=[],bm=this.c.get("audio"),cm=0;cm<bm.length;++cm)for(var dm=bm[cm],em=dm.lang,fm=0;fm<dm.o.length;++fm){var gm=dm.o[fm];if(gm.N&&gm.H){var hm=gm.D,gm=new u(hm,gm.bandwidth,em,gm.id);hm==zl&&(gm.active=true);am.push(gm);}}return am;};zk.prototype.getAudioTracks=zk.prototype.ca;zk.prototype.Za=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var zl=this.b.text,am=zl?zl.oa():null,am=am?am.D:0,bm=[],cm=this.c.get("text"),dm=0;dm<cm.length;++dm)for(var em=cm[dm],fm=em.lang,gm=0;gm<em.o.length;++gm){var hm=em.o[gm].D,im=new da(hm,fm);hm==am&&(im.active=true,im.enabled=zl.ya());bm.push(im);}return bm;};zk.prototype.getTextTracks=zk.prototype.Za;function el(zl,am){if(zl.C){for(var bm={},cm=zl.a.a[0],dm=0;dm<cm.a.length;++dm){var em=cm.a[dm];bm[em.D]=em;}zl.c.a={};cm=nc(am);for(dm=0;dm<cm.length;++dm){var em=cm[dm],fm=am.get(em);if("video"==em){var gm=fm[0].id;zl.c.push(em,bm[gm]);}else if("audio"==em){for(var gm=fm[0].b.split(";")[0],hm=0;hm<fm.length;++hm){var im=fm[hm];im.b.split(";")[0]==gm&&zl.c.push(em,bm[im.id]);}}else for(hm=0;hm<fm.length;++hm)gm=fm[hm].id,zl.c.push(em,bm[gm]);}zl.fa=true;if(bm=zl.c.get("audio"))kl(zl,bm),zl.c.set("audio",bm),bm=bm[0].lang||zl.B,zb(2,zl.B,bm)&&(zl.fa=false);if(bm=zl.c.get("text"))kl(zl,bm),zl.c.set("text",bm),bm=bm[0].lang||zl.B,zb(2,zl.B,bm)||(zl.fa=false);}}zk.prototype.selectVideoTrack=function(zl,am,bm,cm){return jl(this,"video",zl,am,bm,cm);};function fl(zl,am){var bm=zl.b.text;bm&&bm.sa(am);}function gl(zl){if(zl.h){for(var am=false,bm=0;bm<zl.a.a.length;++bm)for(var cm=zl.a.a[bm],dm=0;dm<cm.a.length;++dm){var em=cm.a[dm];if("video"==em.contentType)for(var fm=0;fm<em.o.length;++fm){var gm=em.o[fm],hm=gm.H;gm.H=true;zl.h.maxWidth&&gm.width>zl.h.maxWidth&&(gm.H=false);zl.h.maxHeight&&gm.height>zl.h.maxHeight&&(gm.H=false);zl.h.minHeight&&gm.height<zl.h.minHeight&&(gm.H=false);zl.h.maxBandwidth&&gm.bandwidth>zl.h.maxBandwidth&&(gm.H=false);zl.h.minBandwidth&&gm.bandwidth<zl.h.minBandwidth&&(gm.H=false);hm!=gm.H&&(am=true);}}0!=lc(zl.c).length&&am&&(il(zl),0<zl.M().length||(am=Error("The application has restricted all video tracks!"),am.type="app",am=yb(am),zl.dispatchEvent(am)));}}zk.prototype.$a=function(){return this.a?this.a.b:false;};zk.prototype.isLive=zk.prototype.$a;function hl(zl,am){for(var bm,cm=false,dm=new kc(),em=lc(zl.c),fm=0;fm<em.length;++fm)for(var gm=em[fm],hm=0;hm<gm.o.length;++hm){var im=gm.o[hm];im.f.forEach(function(jm){dm.push(jm,im);});}for(bm in am)if(em=ub[am[bm]]||null,gm=dm.get(bm)){for(fm=0;fm<gm.length;++fm)im=gm[fm],hm=im.N,im.N=!em,hm!=im.N&&(cm=true);}else yc(bm);cm&&(il(zl),cm=zl.ca(),bm=zl.M(),cm=zl.c.a.hasOwnProperty("audio")&&0==cm.length,bm=zl.c.a.hasOwnProperty("video")&&0==bm.length,cm||bm)&&(bm=Error("The key system has restricted all "+(cm&&bm?"audio and video tracks.":cm?"audio tracks.":"video tracks.")),bm.type="drm",bm=yb(bm),zl.dispatchEvent(bm));}function il(zl){var am=xb({type:"trackschanged",bubbles:true});zl.dispatchEvent(am);}function jl(zl,am,bm,cm,dm,em){if(!zl.c.a.hasOwnProperty(am)||!zl.b[am])return false;for(var fm=zl.c.get(am),gm=0;gm<fm.length;++gm)for(var hm=fm[gm],im=0;im<hm.o.length;++im){var jm=hm.o[im];if(jm.D==bm){if(!jm.N||!jm.H)return false;if("text"!=am&&!zl.Ma)return bm=zl.m[am],zl.m[am]={Ja:jm,Sa:null!=bm&&bm.Sa||cm,Ta:null!=bm&&bm.Ta||dm,switchReason:em},true;tj(zl.G,jm);zl.b[am].pa(jm,cm,dm,em);return true;}}return false;}function kl(zl,am){for(var bm=0;2>=bm;++bm)for(var cm=0;cm<am.length;++cm){var dm=am[cm];if(zb(bm,zl.B,dm.lang)){am.splice(cm,1);am.splice(0,0,dm);return;}}for(cm=0;cm<am.length;++cm)if(dm=am[cm],dm.b){am.splice(cm,1);am.splice(0,0,dm);break;}}j=zk.prototype;j.vb=function(){this.j.qa(this.g,"sourceopen");this.bb.resolve();};function ll(zl){for(var am=[],bm=["audio","video","text"],cm=0;cm<bm.length;++cm){var dm=bm[cm];zl.c.a.hasOwnProperty(dm)&&am.push(zl.c.get(dm)[0]);}for(var em=ml(zl,am),cm=0;cm<bm.length;++cm)if(dm=bm[cm],zl.c.a.hasOwnProperty(dm)&&!em[dm])return zl=Error("Unable to select an initial "+dm+" stream: all "+dm+" streams have been restricted (by the application or by the key system)."),zl.type="stream",Promise.reject(zl);am=ec(em).map(function(fm){return fm.I.create();});return Promise.all(am).then(dd(zl,function(fm){if(!fm.every(function(gm){return gm.length();}))return fm=Error("Some streams are not available."),fm.type="stream",Promise.reject(fm);fm=vl(this,fm);if(!fm)return fm=Error("Some streams are not available."),fm.type="stream",Promise.reject(fm);if(!nl(this,em))return fm=Error("Failed to create Stream objects."),fm.type="stream",Promise.reject(fm);this.l.start();pl(this,em,fm);return Promise.resolve();})).catch(dd(zl,function(fm){if("aborted"!=fm.type)return Object.keys(this.b),this.a.b?(eb()<this.a.i?(fm=Math.max(this.a.i-Date.now()/1000,this.na),this.K=i.setTimeout(this.fb.bind(this,true),1000*fm)):cl(this,0),Promise.resolve()):Promise.reject(fm);}));}function ml(zl,am){for(var bm={},cm=0;cm<am.length;++cm){var dm=am[cm],em=null;if("video"==dm.contentType){var fm=zl.l.getInitialVideoTrackId();if(null==fm)continue;em=dm.o.filter(function(gm){return gm.D==fm;});if(0==em.length)continue;em=em[0];}else if("audio"==dm.contentType){if(fm=zl.l.getInitialAudioTrackId(),em=dm.o.filter(function(gm){return gm.D==fm;}),0==em.length){em=dm.o.filter(function(gm){return gm.N&&gm.H;});if(0==em.length)continue;em=dm.o[Math.floor(em.length/2)];}else em=em[0];}else 0<dm.o.length&&(em=dm.o[0]);bm[dm.contentType]=em;}return bm;}function nl(zl,am){var bm={},cm;for(cm in am){var dm=am[cm],dm="text"==cm?new dj(zl,zl.f):ol(zl,dm);if(!dm)return ec(bm).forEach(function(em){em.destroy();}),false;bm[cm]=dm;}zl.b=bm;return true;}function ol(zl,am){var bm=new ui(zl,zl.f,zl.g,ni(am),zl.ea,zl.ab);bm.C(zl.i);return bm;}function pl(zl,am,bm){zl.Va=zl.f.playbackRate;zl.f.playbackRate=0;rl(zl,bm);var cm;zl.V&&zl.V<=bm.end&&zl.V>=bm.start?cm=zl.V:zl.a.b?(cm=bm.end,zl.Pa=true):cm=bm.start;pc(zl.j,zl.f,"seeking",zl.Cb.bind(zl));zl.f.currentTime!=cm&&(zl.f.currentTime=cm,zl.A=cm);sl(zl,bm.start,bm.end);var dm=[],em;for(em in zl.b){bm=zl.b[em];dd(zl,function(gm){dm.push(gm.kb(this.aa).then(dd(this,function(hm){var im=gm.za();im>this.wa&&(this.wa=im);return hm;})));})(bm);pc(zl.j,bm,"ended",zl.Db.bind(zl));cm=am[em];tj(zl.G,cm);var fm=zl.l.getInitialSwitchReason()||void 0;bm.pa(cm,false,void 0,fm);}Promise.all(dm).then(zl.rb.bind(zl)).catch(dd(zl,function(gm){"destroy"!=gm.type&&(gm=yb(gm),this.dispatchEvent(gm));}));fl(zl,zl.fa);}j.rb=function(zl){n(zl&&zl.length==Object.keys(this.b).length);for(var am=Number.POSITIVE_INFINITY,bm=Number.NEGATIVE_INFINITY,cm=0;cm<zl.length;++cm)var dm=zl[cm],am=Math.min(am,dm),bm=Math.max(bm,dm);zl=ul(this);for(cm=0;cm<zl.length;++cm)zl[cm].ja(bm);ql(this,zl,bm);cm=lc(this.c).map(function(em){return em.o;}).reduce(function(em,fm){return em.concat(fm);},[]).map(function(em){var fm=[em.I.create()];em.J&&fm.push(em.J.create());return Promise.all(fm);});Promise.all(cm).then(dd(this,function(em){for(var fm=0;fm<em.length;++fm)em[fm][0].ja(bm);this.Ma=true;for(var gm in this.m)em=this.m[gm],fm=this.b[gm],tj(this.G,em.Ja),fm.pa(em.Ja,em.Sa,em.Ta,em.switchReason);this.m={};})).catch(dd(this,function(em){"aborted"!=em.type&&(em=yb(em),this.dispatchEvent(em));}));};function ql(zl,am,bm){if(am=vl(zl,am))rl(zl,am),sl(zl,am.start,am.end);0!=bm&&(bm=zl.f.currentTime+bm,zl.f.currentTime=bm,zl.A=bm);zl.Pa&&am&&(zl.f.currentTime=am.end);zl.f.playbackRate=zl.Va;zl.a.b&&null!=zl.a.f&&cl(zl,0);wl(zl);zl.aa.resolve();}function rl(zl,am){if(zl.a.b){isNaN(zl.g.duration)&&(zl.g.duration=am.end+2592000);}else if(isNaN(zl.g.duration)||am.end>zl.g.duration){zl.g.duration=am.end;for(var bm=0;bm<zl.g.sourceBuffers.length;++bm)zl.g.sourceBuffers[bm].appendWindowEnd=am.end;}}j.Eb=function(){this.L=null;wl(this);var zl=vl(this,ul(this));zl&&(this.a.b&&this.Z!=zl.w&&(this.Z=zl.w,null!=this.s&&(i.clearTimeout(this.s),this.s=null)),sl(this,zl.start,zl.end),this.f.paused||tl(this,this.f.currentTime,zl.start,zl.end));};function sl(zl,am,bm){am=xb({type:"seekrangechanged",bubbles:true,start:am,end:bm});zl.dispatchEvent(am);}j.Cb=function(){var zl=this.f.currentTime;if(null!=this.A){if(zl>=this.A-.01&&zl<=this.A+.01){this.A=null;return;}this.A=null;}var am=vl(this,ul(this));if(am){var bm=am.end;(am=tl(this,zl,am.start,bm))||(zl<=bm+.01?am=false:(this.f.currentTime=bm,am=true));if(!am)for(var cm in this.b)this.b[cm].hb();}};function tl(zl,am,bm,cm){if(am>=bm-.01)return false;am=0;if(zl.a.b){am=.5;for(var dm in zl.b)if(!zl.b[dm].ib(bm+am)){am=zl.a.c;break;}}zl.f.currentTime=Math.min(bm+am,cm);return true;}j.Db=function(){if(!this.a.b){for(var zl in this.b)if(!this.b[zl].Da())return;this.ra();}};j.tb=function(){this.da=true;if(this.a.h&&this.f.currentTime+.5>this.Z)return this.ra();ec(this.b).every(function(zl){return zl.Da();})&&(this.s=i.setTimeout(this.ra.bind(this),1000*this.Ua));};j.sb=function(){this.da=false;null!=this.s&&(i.clearTimeout(this.s),this.s=null);};j.Ob=function(){var zl=this.G,am=this.ea.getBandwidth();zl.estimatedBandwidth=am;zl.bandwidthHistory.push(new vj(am));};j.ra=function(){this.da=false;this.s=null;this.g.endOfStream();};function ul(zl){return ec(zl.b).map(function(am){return am.Ba();}).filter(function(am){return null!=am;});}function vl(zl,am){for(var bm=0,cm=Number.POSITIVE_INFINITY,dm=Number.POSITIVE_INFINITY,em=0;em<am.length;++em){var fm=am[em].Aa(),bm=Math.max(bm,fm.start);null!=fm.end&&(cm=Math.min(cm,fm.end));am[em].length()&&(dm=Math.min(dm,am[em].w().a));}if(cm==Number.POSITIVE_INFINITY)if(cm=zl.a.a[0],cm.b){cm=(cm.start||0)+cm.b;}else return null;zl.a.b&&(em=Math.max(zl.a.c,zl.La?zl.i.streamBufferSize||0:0),cm=Math.max(cm-em,bm));if(bm>cm)return null;cm=Math.floor(100000*cm)/100000;return {start:bm,end:cm,w:dm};}function wl(zl){zl.a.b&&(zl.L=i.setTimeout(zl.Eb.bind(zl),1000));}function xl(zl){for(var am in zl.b)zl.b[am].C(zl.i);}j.za=function(){return this.wa;};zk.prototype.getLongestInitResponseTime=zk.prototype.za;function yl(zl,am,bm,cm){bm||(bm=new uc());cm||(cm=new xk());zk.call(this,null,bm,cm);"string"===typeof zl?this.nb=zl:this.Xa=zl;this.$=null;this.ba=am;this.la=[];this.Na=[];this.Oa=[];this.F=null;}m(yl,zk);l("shaka.player.DashVideoSource",yl);yl.prototype.pb=function(zl,am,bm){this.la.push(zl);this.Na.push(am||"");this.Oa.push(bm||"");};yl.prototype.addExternalCaptions=yl.prototype.pb;yl.prototype.qb=function(zl){this.F=zl;};yl.prototype.setNetworkCallback=yl.prototype.qb;yl.prototype.destroy=function(){this.$=this.F=this.ba=null;zk.prototype.destroy.call(this);};yl.prototype.Ia=function(){var zl=dd(this,function(cm){this.$=cm;for(var dm=0;dm<this.la.length;dm++){var em=cm,fm=this.la[dm],gm=this.Na[dm],hm=this.Oa[dm];if(0!==em.a.length){var im=new qf();im.contentType="text";im.lang=gm||"en";im.c=true;gm=new tf();gm.bandwidth=0;gm.f=hm||"text/vtt";gm.u=[new ye(fm)];im.a.push(gm);em.a[0].b.push(im);hg(em.a[0]);}}this.a=hj(new gj(this.ba),cm,this.F);return zk.prototype.Ia.call(this);});if(this.Xa)return zl(this.Xa);var am=[new ye(this.nb)],bm;this.ma&&(bm=3);am=new hh(this.F,am);return nh(new mh(am,this.va,bm)).then(zl);};yl.prototype.eb=function(zl,am,bm){return nh(new mh(zl,this.va,am,bm)).then(dd(this,function(cm){this.$=cm;cm=hj(new gj(this.ba),cm,this.F);return Promise.resolve(cm);}));};yl.prototype.cb=function(){var zl=hj(new gj(this.ba),this.$,this.F);return Promise.resolve(zl);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('VideoQualityClasses',['VideoQualityClassInternal'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('VideoQualityClassInternal').orderedValues;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.forceHighQualityDefault;this.$CustomAbrManager10=j.initiallyForcedRepresentations;this.$CustomAbrManager11=null;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager14();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager15.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager16.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager17.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager17=function(){'use strict';this.$CustomAbrManager14();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager18(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager11=j;this.$CustomAbrManager14(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager11=null;this.$CustomAbrManager14(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager19();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager13;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager20();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager18=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager15=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager14(event);};i.prototype.$CustomAbrManager14=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager19();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager12);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager16=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager19=function(){var j=this;'use strict';var k=this.$CustomAbrManager2.getVideoTracks();if(k.length==0)return null;if(!this.$CustomAbrManager6)for(var l=0;l<k.length;l++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(k[l].streamInfoID)){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;return k[l];}if(this.$CustomAbrManager11){var m=k.find(function(y){return y.id===this.$CustomAbrManager11.id;}.bind(this));if(m){this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').USER;return m;}}k.sort(h.compare);if(this.$CustomAbrManager9){var n=function(){var y=c('VideoQualityClasses').indexOf('hd'),z=k.filter(function(aa){return c('VideoQualityClasses').indexOf(aa.fbQualityClass)>=y;});j.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').PREFER_HIGH_QUALITY;if(!z.length)return {v:k[k.length-1]};k=z;}();if(typeof n==="object")return n.v;}var o=k[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;k=k.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager18(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var l=0;l<k.length;l++){var u=k[l],v=l+1<k.length?k[l+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/i.BANDWIDTH_DOWNGRADE_TARGET,x=(v.bandwidth+s)/i.BANDWIDTH_UPGRADE_TARGET;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager12=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager20=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];return null;};f.exports=i;},null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$VideoPlayerLiveStreamState1=c('RTISubscriptionManager').subscribe('video_broadcast/interrupt_'+k,this.$VideoPlayerLiveStreamState3.bind(this));this.$VideoPlayerLiveStreamState2=c('RTISubscriptionManager').subscribe('video_broadcast/ended_'+k,this.$VideoPlayerLiveStreamState4.bind(this));}j.prototype.unsubscribe=function(){'use strict';this.$VideoPlayerLiveStreamState2.unsubscribe();this.$VideoPlayerLiveStreamState1.unsubscribe();};j.prototype.$VideoPlayerLiveStreamState3=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamInterruptAt',m);};j.prototype.$VideoPlayerLiveStreamState4=function(k){'use strict';var l=JSON.parse(k.payload||'{}')||{},m=l.time_position;if(m)m/=1000;this.emit('streamEndedAt',m);};f.exports=j;},null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','TaggedTimeRanges','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);var ea=da.reduce(function(fa,ga){return ga.fbQualityLabel=='hd'?ga:fa;});if(!ea)return da.pop().id;return ea.id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa=this,ga=ea.videoID,ha=ea.width,ia=ea.height,ja=ea.manifest,ka=ea.manifestUrl,la=ea.isLive,ma=ea.playHighQualityTrack;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ma;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ha;this.$VideoPlayerHTML5Shaka8=ia;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)(function(){fa.$VideoPlayerHTML5Shaka9=true;var na=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka9=false;na.remove();}.bind(fa));})();c('EventListener').listen(ca,'timeupdate',function(na){this.$VideoPlayerHTML5Shaka10(na.target.currentTime);}.bind(this));this.$VideoPlayerHTML5Shaka11=null;this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka14=new l(ca);this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka15();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka16();}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('error',function(na){return this.$VideoPlayerHTML5Shaka17(na);}.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka18.bind(this));this.$VideoPlayerHTML5Shaka14.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka19.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka14.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka20.bind(this));this.$VideoPlayerHTML5Shaka21=da;this.$VideoPlayerHTML5Shaka22=null;if(ja){this.$VideoPlayerHTML5Shaka23=o(ja);}else this.$VideoPlayerHTML5Shaka23=ka;this.$VideoPlayerHTML5Shaka24=this.$VideoPlayerHTML5Shaka25();this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();this.$VideoPlayerHTML5Shaka28=new (c('TaggedTimeRanges'))(function(na,oa){return (na.id===oa.id&&na.reason===oa.reason);});this.$VideoPlayerHTML5Shaka26.setTaggedTimeRangesEntryAdder(function(na,oa,pa){this.$VideoPlayerHTML5Shaka28.add(na,oa,pa);}.bind(this));this.$VideoPlayerHTML5Shaka29=ca;this.$VideoPlayerHTML5Shaka14.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:la?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:la?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveSendPushHeaders:c('VideoPlayerShakaExperiments').liveSendPushHeaders});if(la&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka30=new (c('VideoPlayerLiveStreamState'))(ga);this.$VideoPlayerHTML5Shaka30.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka31.bind(this));}this.$VideoPlayerHTML5Shaka14.load(this.$VideoPlayerHTML5Shaka26);}ba.prototype.$VideoPlayerHTML5Shaka10=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka28.get(ca);if(!da)return;var ea=da.id,fa=da.reason;if(this.$VideoPlayerHTML5Shaka22!==ea){this.$VideoPlayerHTML5Shaka22=ea;this.emit('representation_ended',{representationID:ea,streamSwitchReason:fa});}};ba.prototype.getStreamInfoIDForTimePosition=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka28.get(ca),ea=null;if(da)ea=da.id;return ea;};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka11;var ca=this.$VideoPlayerHTML5Shaka26.getVideoTracks();ca.sort(n.compare);return ca.map(function(da){return da.fbQualityLabel;});};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka12;var ca=this.$VideoPlayerHTML5Shaka26.getVideoTracks(),da=ca.find(function(ea){return ea.active;});return da?da.fbQualityLabel:null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka26.getVideoTracks().find(function(ea){return ca==ea.fbQualityLabel;});if(da){this.$VideoPlayerHTML5Shaka13=ca;this.$VideoPlayerHTML5Shaka24.setPreferredVideoTrack(da);}};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka13=null;this.$VideoPlayerHTML5Shaka24.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka32&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka33=true;this.$VideoPlayerHTML5Shaka34=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'pause');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka29.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka32&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka33=false;this.$VideoPlayerHTML5Shaka34=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'waiting');this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka29.play();};ba.prototype.$VideoPlayerHTML5Shaka35=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka4;if(ca){var da=this.$VideoPlayerHTML5Shaka29.currentTime,ea=4,fa=da>ca-ea,ga=da>ca;if(ga){this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka32)this.$VideoPlayerHTML5Shaka6=fa;}return this.$VideoPlayerHTML5Shaka6;};ba.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){z(this.$VideoPlayerHTML5Shaka29,'pause');this.$VideoPlayerHTML5Shaka33=false;this.$VideoPlayerHTML5Shaka34=false;}this.$VideoPlayerHTML5Shaka32=true;if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka5=this.$VideoPlayerHTML5Shaka29.playbackRate;this.$VideoPlayerHTML5Shaka29.playbackRate=0;this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka14.setResumeAfterBuffering(true);this.emit('bufferingStart');}};ba.prototype.$VideoPlayerHTML5Shaka16=function(){var ca=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka33)z(this.$VideoPlayerHTML5Shaka29,'play');if(!this.$VideoPlayerHTML5Shaka34)(function(){var da=c('EventListener').capture(ca.$VideoPlayerHTML5Shaka29.parentNode,'playing',function(ea){if(ea.target!=this.$VideoPlayerHTML5Shaka29)return;da.remove();if(this.$VideoPlayerHTML5Shaka9){this.$VideoPlayerHTML5Shaka9=false;return;}c('Event').kill(ea);}.bind(ca));})();}this.$VideoPlayerHTML5Shaka32=false;this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka17=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka3&&this.$VideoPlayerHTML5Shaka2&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka14.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka12=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka11=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka3=this.$VideoPlayerHTML5Shaka26&&this.$VideoPlayerHTML5Shaka26.isLive();this.$VideoPlayerHTML5Shaka14.unload();this.$VideoPlayerHTML5Shaka2=true;};ba.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka1,da={forceHighQualityDefault:ca,maxWidth:this.$VideoPlayerHTML5Shaka36(),maxHeight:this.$VideoPlayerHTML5Shaka37(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka21};return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(da):new aa(ca,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka27=function(){'use strict';!this.$VideoPlayerHTML5Shaka24?h(0):void 0;!this.$VideoPlayerHTML5Shaka23?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka23,null,v,this.$VideoPlayerHTML5Shaka24);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka2)return;this.$VideoPlayerHTML5Shaka24=this.$VideoPlayerHTML5Shaka25();this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka27();if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka14.setPlaybackRate(0);this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka14.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka14.loadWithSilencedErrors(this.$VideoPlayerHTML5Shaka26).then(function(){if(this.$VideoPlayerHTML5Shaka3!=this.$VideoPlayerHTML5Shaka26.isLive())return this.$VideoPlayerHTML5Shaka38();if(this.$VideoPlayerHTML5Shaka13)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka13);this.$VideoPlayerHTML5Shaka12=null;this.$VideoPlayerHTML5Shaka39=null;this.$VideoPlayerHTML5Shaka2=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka38();da.detail=da.detail||{};da.detail.type=da.detail.type||'LOAD_FAILURE';this.$VideoPlayerHTML5Shaka17(da);}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka38=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka29,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka30.unsubscribe();this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka26.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka40=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka36=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka7*ba.$VideoPlayerHTML5Shaka40();};ba.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka8*ba.$VideoPlayerHTML5Shaka40();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka7=ca;this.$VideoPlayerHTML5Shaka8=da;this.$VideoPlayerHTML5Shaka24.setResolutionConstraint(this.$VideoPlayerHTML5Shaka36(),this.$VideoPlayerHTML5Shaka37());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka19=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka18=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};ba.prototype.$VideoPlayerHTML5Shaka31=function(ca){'use strict';this.$VideoPlayerHTML5Shaka4=ca;};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';if(this.$VideoPlayerHTML5Shaka35()){this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka29.playbackRate=this.$VideoPlayerHTML5Shaka5;this.emit('streamResumed');}};f.exports=ba;},null);