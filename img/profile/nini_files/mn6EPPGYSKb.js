if (self.CavalryLogger) { CavalryLogger.start_js(["XsSmi"]); }

__d('SphericalImageOverlay',['requestAnimationFrame','ObservationTimer','Observables','ObservableVisibility','SphericalMouseOverlay','SphericalImageViewer'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=4000,i=2000*2;function j(k,l,m){this.$SphericalImageOverlay3=k;this.$SphericalImageOverlay4=new (c('SphericalMouseOverlay'))(m);this.$SphericalImageOverlay5=true;this.$SphericalImageOverlay10=[];k.once('updateViewportBegin',function(){return this.$SphericalImageOverlay11();}.bind(this));var n=new (c('ObservableVisibility').ElementFullyVisible)(m),o=new (c('ObservableVisibility').ElementFullyVisible)(l),p=new (c('ObservableVisibility').ViewportVisible)();this.$SphericalImageOverlay7=new (c('Observables').Every)(n,p);this.$SphericalImageOverlay8=new (c('Observables').Every)(o,p);if(this.$SphericalImageOverlay3.imageLoaded){c('requestAnimationFrame')(function(){return this.$SphericalImageOverlay12();}.bind(this));}else this.$SphericalImageOverlay3.addListener('imageLoaded',function(){return this.$SphericalImageOverlay12();}.bind(this));}j.prototype.$SphericalImageOverlay12=function(){this.$SphericalImageOverlay9=new (c('ObservationTimer'))(this.$SphericalImageOverlay8,h,function(){return this.$SphericalImageOverlay13();}.bind(this));this.$SphericalImageOverlay10.forEach(function(k){return k();});};j.prototype.$SphericalImageOverlay13=function(){if(this.$SphericalImageOverlay5){this.$SphericalImageOverlay4.startAnimation();this.$SphericalImageOverlay9=new (c('ObservationTimer'))(this.$SphericalImageOverlay7,i,function(){return this.$SphericalImageOverlay4.stopAnimation();}.bind(this));}};j.prototype.$SphericalImageOverlay11=function(){this.$SphericalImageOverlay4.stopAnimation();this.$SphericalImageOverlay5=false;if(this.$SphericalImageOverlay9)this.$SphericalImageOverlay9.cancel();};f.exports=j;},null);