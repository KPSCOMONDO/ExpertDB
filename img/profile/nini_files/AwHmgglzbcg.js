if (self.CavalryLogger) { CavalryLogger.start_js(["CXojA"]); }

__d('MessengerBotsMenuStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommerceBotMenuDataManager'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MessengerBotsMenuStore1=new (c('Cache'))();this.$MessengerBotsMenuStore2=false;}j.prototype.__onDispatch=function(k){var l=k.type,m=k.pageID||k.ctas&&k.ctas.pageID;switch(l){case c('MNCommerceActionTypes').BOTS_MENU.SHOW:this.$MessengerBotsMenuStore2=true;break;case c('MNCommerceActionTypes').BOTS_MENU.HIDE:this.$MessengerBotsMenuStore2=false;break;case c('MNCommerceActionTypes').BOTS_MENU.LOADED:var n=k.ctas.menu;this.$MessengerBotsMenuStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);break;case c('MNCommerceActionTypes').BOTS_MENU.LOAD_ERROR:this.$MessengerBotsMenuStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load structured menu for: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);break;}this.__emitChange();};j.prototype.getState=function(){return this.$MessengerBotsMenuStore2;};j.prototype.getMenu=function(k){if(k&&!this.$MessengerBotsMenuStore1.has(k)){this.$MessengerBotsMenuStore1.set(k,c('LoadObject').loading().setValue({pageID:k}));c('MNCommerceBotMenuDataManager').fetchMenu(k);}return this.$MessengerBotsMenuStore1.get(k)||c('LoadObject').empty();};f.exports=new j();},null);