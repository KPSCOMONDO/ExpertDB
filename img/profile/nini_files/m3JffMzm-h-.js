if (self.CavalryLogger) { CavalryLogger.start_js(["Ub+DZ"]); }

__d('MessengerBotsMenuButton.react',['BootloadOnRender.react','ChatFlyoutPlaceholder.react','CurrentEnvironment','JSResource','LazyComponent.react','Link.react','MessengerBotsMenuActions','MessengerBotsMenuStore','MessengerContextualDialog.react','React','ReactLayeredComponentMixin','StoreAndPropBasedStateMixin','XUIContextualDialog.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=302,j=280,k=c('React').createClass({displayName:'MessengerBotsMenuButton',_clickGuard:false,mixins:[c('ReactLayeredComponentMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerBotsMenuStore'))],propTypes:{className:h.string,threadID:h.string.isRequired,pageID:h.string.isRequired},statics:{calculateState:function(l){return {shown:c('MessengerBotsMenuStore').getState()};}},getInitialState:function(){return {show:false};},componentWillUnmount:function(){if(this.state.shown)this._hideFlyout();},shouldComponentUpdate:function(l,m){return this.state.shown!==m.shown;},render:function(){return (c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this.showFlyout,onMouseDown:this._prepareForClick,role:'button',ref:'link'}));},_hideFlyout:function(){c('MessengerBotsMenuActions').hideMenu(this.props.threadID);},_prepareForClick:function(){this._clickGuard=this.state.shown;},showFlyout:function(event){event&&event.stopPropagation();if(this._clickGuard){this._clickGuard=false;return;}c('MessengerBotsMenuActions').showMenu(this.props.threadID);},renderLayers:function(){if(!this.state.shown)return {};var l=c('CurrentEnvironment').messengerdotcom,m=l?i:j,n=l?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');return {contextualDialog:c('React').createElement(n,babelHelpers['extends']({alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:l?'right':'left',width:m,position:'above',contextRef:function(){return this.refs.link;}.bind(this),onBlur:this._hideFlyout,shown:this.state.shown},this.props),c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onEscKeyDown:this._hideFlyout,shown:this.state.shown,pageID:this.props.pageID,threadID:this.props.threadID}),loader:c('JSResource')('MessengerPlatformPersistMenuDialog.react').__setRef('MessengerBotsMenuButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}))};}});f.exports=k;},null);